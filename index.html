<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬øC√≥mo ser√° tu d√≠a?</title>
    
    <!-- =============================================== -->
    <!-- PASO 4.1: ANALYTICS Y TRACKING AVANZADO (NUEVO) -->
    <!-- =============================================== -->
    
    <!-- Google Analytics 4 - REEMPLAZA 'GA_MEASUREMENT_ID' por tu ID real -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      
      gtag('config', 'GA_MEASUREMENT_ID', {
        // Configuraci√≥n mejorada para monetizaci√≥n
        custom_map: {
          'custom_parameter_1': 'platform',
          'custom_parameter_2': 'revenue',
          'custom_parameter_3': 'sponsor_category'
        },
        // Tracking de conversiones
        send_page_view: true,
        // Configuraci√≥n de ecommerce mejorado
        allow_google_signals: true,
        allow_ad_personalization_signals: true
      });
      
      // Eventos personalizados para monetizaci√≥n
      gtag('event', 'page_view_monetization', {
        'event_category': 'monetization',
        'event_label': 'fortune_page_loaded',
        'value': 1
      });
    </script>
    
    <!-- Facebook Pixel - REEMPLAZA 'TU_PIXEL_ID' por tu ID real -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    
    fbq('init', 'TU_PIXEL_ID');
    fbq('track', 'PageView');
    
    // Eventos personalizados para Facebook
    fbq('track', 'ViewContent', {
      content_type: 'fortune_page',
      content_category: 'monetization',
      value: 0.02,
      currency: 'EUR'
    });
    </script>
    <noscript>
      <img height="1" width="1" style="display:none" 
           src="https://www.facebook.com/tr?id=TU_PIXEL_ID&ev=PageView&noscript=1" />
    </noscript>
    
    <!-- Microsoft Clarity (OPCIONAL - Analytics de comportamiento) -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "TU_CLARITY_ID");
    </script>
    
    <!-- Google Tag Manager (OPCIONAL - Para gesti√≥n avanzada de tags) -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-XXXXXXX');</script>
    
    <!-- Hotjar (OPCIONAL - Mapas de calor y grabaciones) -->
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:TU_HOTJAR_ID,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
    
    <!-- =============================================== -->
    <!-- META TAGS MEJORADOS PARA SEO Y MONETIZACI√ìN -->
    <!-- =============================================== -->
    
    <!-- SEO Mejorado -->
    <meta name="description" content="Descubre tu predicci√≥n del d√≠a personalizada. Mensajes de esperanza y reflexi√≥n que cambiar√°n tu perspectiva. ¬°Tu fortuna te espera!">
    <meta name="keywords" content="fortuna, predicci√≥n, hor√≥scopo, mensaje del d√≠a, suerte, futuro, destino">
    <meta name="author" content="Tu Sitio de Fortuna">
    
    <!-- Open Graph (Facebook, WhatsApp, etc.) -->
    <meta property="og:title" content="¬øC√≥mo ser√° tu d√≠a? - Tu Fortuna Personal">
    <meta property="og:description" content="Descubre tu predicci√≥n personalizada del d√≠a. Mensajes √∫nicos que cambiar√°n tu perspectiva.">
    <meta property="og:image" content="https://tu-dominio.com/fortune-image.jpg">
    <meta property="og:url" content="https://tu-dominio.com">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Tu Fortuna Diaria">
    
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="¬øC√≥mo ser√° tu d√≠a? - Tu Fortuna Personal">
    <meta name="twitter:description" content="Descubre tu predicci√≥n personalizada del d√≠a.">
    <meta name="twitter:image" content="https://tu-dominio.com/fortune-image.jpg">
    <meta name="twitter:site" content="@tu_usuario_twitter">
    
    <!-- Monetizaci√≥n y Ads -->
    <meta name="monetization" content="enabled">
    <meta name="revenue-tracking" content="multi-platform">
    
    <!-- PWA Support (OPCIONAL - Para app m√≥vil) -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Tu Fortuna">
    
    <!-- Preconnect para mejorar rendimiento -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://connect.facebook.net">
    <link rel="preconnect" href="https://www.google-analytics.com">
    <link rel="dns-prefetch" href="//youtube.com">
    <link rel="dns-prefetch" href="//amazon.es">
    <link rel="dns-prefetch" href="//booking.com">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: white;
            overflow: hidden;
            cursor: pointer;
            margin: 0;
            padding: 0;
        }
        
        .top-section {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            min-height: 60vh;
        }
        
        .bottom-section {
            height: 40vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-top: 2px solid rgba(255, 215, 0, 0.5);
            position: relative;
        }
        
        /* NUEVO: Contenedor para sponsors simult√°neos */
        .sponsors-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: none; /* Oculto inicialmente */
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            padding: 15px;
            z-index: 1000;
        }
        
        .sponsors-container.active {
            display: grid;
        }
        
        .sponsor-frame {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            border: 2px solid rgba(255, 215, 0, 0.6);
            overflow: hidden;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            animation: sponsor-fade-in 0.5s ease-out;
        }
        
        @keyframes sponsor-fade-in {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .sponsor-frame iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
        }
        
        .sponsor-label {
            position: absolute;
            top: 5px;
            left: 5px;
            background: rgba(255, 215, 0, 0.9);
            color: #333;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            z-index: 10;
        }
        
        .sponsor-timer {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 107, 107, 0.9);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            z-index: 10;
        }
        
        /* Adaptaci√≥n para m√≥vil de los sponsors */
        @media (max-width: 768px) {
            .sponsors-container {
                grid-template-columns: 1fr;
                grid-template-rows: 1fr 1fr;
            }
        }
        
        .fortune-container {
            text-align: center;
            max-width: 90%;
            padding: 30px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            animation: fadeIn 1s ease-out;
            transition: all 0.3s ease;
        }
        
        .fortune-container:hover {
            transform: scale(1.02);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        
        .redirect-container {
            text-align: center;
            max-width: 90%;
            padding: 30px;
            background: rgba(255, 215, 0, 0.2);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 2px solid rgba(255, 215, 0, 0.6);
            box-shadow: 0 8px 32px rgba(255, 215, 0, 0.2);
            animation: urgent 1.5s infinite, slideUp 1s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes urgent {
            0%, 100% { 
                background: rgba(255, 215, 0, 0.2);
                border-color: rgba(255, 215, 0, 0.6);
            }
            50% { 
                background: rgba(255, 215, 0, 0.4);
                border-color: rgba(255, 215, 0, 0.8);
            }
        }
        
        .fortune-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: rotate 4s infinite ease-in-out;
        }
        
        @keyframes rotate {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(10deg) scale(1.1); }
            75% { transform: rotate(-10deg) scale(1.1); }
        }
        
        .fortune-title {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
            to { text-shadow: 2px 2px 20px rgba(255,215,0,0.6); }
        }
        
        .fortune-message {
            font-size: 1.6em;
            line-height: 1.8;
            margin-bottom: 25px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            border-left: 5px solid #ffd700;
            text-align: center;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
            animation: slideIn 1s ease-out 2s both;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .fortune-message p {
            margin: 0;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .fortune-number {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 20px;
        }
        
        .message-type {
            font-size: 0.8em;
            opacity: 0.7;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        .loading-spinner {
            border: 3px solid rgba(255,255,255,0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .auto-redirect {
            font-size: 1.2em;
            text-align: center;
        }
        
        .countdown {
            font-size: 3em;
            font-weight: bold;
            color: #ffd700;
            margin: 15px 0;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
            animation: countdown-pulse 1s infinite;
        }
        
        @keyframes countdown-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .redirect-text {
            font-size: 1.1em;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .redirect-subtext {
            font-size: 0.95em;
            opacity: 0.9;
            margin-top: 15px;
        }
        
        .progress-bar {
            width: 80%;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            margin: 20px auto;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            border-radius: 3px;
            animation: progress 15s linear forwards;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
        }
        
        @keyframes progress {
            from { width: 0%; }
            to { width: 100%; }
        }
        
        .click-anywhere {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 215, 0, 0.9);
            color: #333;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            animation: bounce 2s infinite;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-10px); }
            60% { transform: translateX(-50%) translateY(-5px); }
        }
        
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .interactive-hint {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 215, 0, 0.8);
            color: #333;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            animation: fadeInOut 3s infinite;
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
        
        /* ESTILOS PARA REVELACI√ìN GRADUAL */
        .fortune-message-revealing {
            filter: blur(20px);
            opacity: 0.3;
            transform: scale(0.8);
            transition: all 0.8s ease-out;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,215,0,0.2) 100%);
            border: 2px solid rgba(255,215,0,0.3);
            position: relative;
            overflow: hidden;
        }
        
        .reveal-countdown {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff6b6b, #ffd700);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255,107,107,0.4);
            animation: countdown-pulse 1s infinite alternate;
            z-index: 1000;
        }
        
        .checking-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: #ffd700;
            padding: 20px 30px;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: bold;
            border: 2px solid #ffd700;
            animation: checking-glow 2s ease-in-out infinite;
            z-index: 999;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        @keyframes checking-glow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(255,215,0,0.5);
                border-color: #ffd700;
            }
            50% { 
                box-shadow: 0 0 30px rgba(255,215,0,0.8);
                border-color: #ffed4e;
            }
        }
        
        .reveal-progress {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
            z-index: 999;
        }
        
        .reveal-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffd700, #4ecdc4);
            border-radius: 4px;
            transition: width 0.8s ease-out;
            box-shadow: 0 0 15px rgba(255,215,0,0.6);
        }
        
        .reveal-step-1 { filter: blur(18px); opacity: 0.4; transform: scale(0.82); }
        .reveal-step-2 { filter: blur(16px); opacity: 0.5; transform: scale(0.84); }
        .reveal-step-3 { filter: blur(14px); opacity: 0.6; transform: scale(0.86); }
        .reveal-step-4 { filter: blur(12px); opacity: 0.7; transform: scale(0.88); }
        .reveal-step-5 { filter: blur(10px); opacity: 0.75; transform: scale(0.90); }
        .reveal-step-6 { filter: blur(8px); opacity: 0.8; transform: scale(0.92); }
        .reveal-step-7 { filter: blur(6px); opacity: 0.85; transform: scale(0.94); }
        .reveal-step-8 { filter: blur(4px); opacity: 0.9; transform: scale(0.96); }
        .reveal-step-9 { filter: blur(2px); opacity: 0.95; transform: scale(0.98); }
        .reveal-step-10 { 
            filter: blur(0px); 
            opacity: 1; 
            transform: scale(1);
            box-shadow: 0 0 30px rgba(255,215,0,0.4);
        }
        
        .fortune-revealed {
            animation: final-reveal 1s ease-out forwards;
        }
        
        @keyframes final-reveal {
            0% { transform: scale(0.98); }
            50% { transform: scale(1.02); }
            100% { 
                transform: scale(1);
                box-shadow: 0 0 40px rgba(255,215,0,0.6);
            }
        }
        
        /* Efectos especiales para m√≥vil */
        @media (max-width: 768px) {
            .top-section { min-height: 65vh; }
            .bottom-section { height: 35vh; }
            .fortune-title { font-size: 2em; }
            .fortune-message { font-size: 1.4em; }
            .fortune-icon { font-size: 60px; }
            .countdown { font-size: 2.5em; }
            
            body {
                cursor: pointer;
                -webkit-tap-highlight-color: transparent;
            }
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="interactive-hint">üëÜ Toca para continuar</div>
    
    <!-- Secci√≥n Superior: Mensaje de la Fortuna -->
    <div class="top-section" onclick="handleUserClick()">
        <div class="fortune-container">
            <div class="fortune-icon">üîÆ</div>
            <h1 class="fortune-title">¬øC√≥mo ser√° tu d√≠a?</h1>
            
            <div class="fortune-number" id="fortuneNumber">Mensaje #<span id="messageNumber">...</span></div>
            <div class="message-type" id="messageType">Preparando tu mensaje...</div>
            
            <div class="fortune-message" id="fortuneMessage">
                <div class="loading-spinner"></div>
            </div>
        </div>
    </div>
    
    <!-- Secci√≥n Inferior: Informaci√≥n de Redirecci√≥n Y SPONSORS SIMULT√ÅNEOS -->
    <div class="bottom-section" onclick="handleUserClick()">
        <!-- Contenedor original de redirecci√≥n -->
        <div class="redirect-container" id="redirectContainer">
            <div class="auto-redirect">
                <div class="redirect-text">üöÄ Preparando contenido exclusivo</div>
                <div class="countdown" id="countdown">15</div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <div class="redirect-subtext">
                    ‚ö° Toca para acelerar ‚ö°
                </div>
            </div>
        </div>
        
        <!-- NUEVO: Contenedor de sponsors simult√°neos -->
        <div class="sponsors-container" id="sponsorsContainer">
            <div class="sponsor-frame" id="sponsor1">
                <div class="sponsor-label">Sponsor 1</div>
                <div class="sponsor-timer" id="timer1">10s</div>
                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&mute=1&controls=0&modestbranding=1" 
                        allow="autoplay; encrypted-media" allowfullscreen></iframe>
            </div>
            
            <div class="sponsor-frame" id="sponsor2">
                <div class="sponsor-label">Sponsor 2</div>
                <div class="sponsor-timer" id="timer2">10s</div>
                <iframe src="https://player.vimeo.com/video/148751763?autoplay=1&muted=1&controls=0" 
                        allow="autoplay; fullscreen" allowfullscreen></iframe>
            </div>
        </div>
    </div>
    
    <div class="click-anywhere" onclick="handleUserClick()">üëÜ Contenido viral esper√°ndote üëÜ</div>

    <script>
        // TODOS TUS MENSAJES ACTUALES PERMANECEN IGUAL
        const positiveMessages = [
            "¬°Hoy ser√° tu d√≠a de suerte! Una oportunidad incre√≠ble se acerca.",
            "El universo conspira a tu favor. Mant√©n los ojos abiertos.",
            "Tu pr√≥xima decisi√≥n cambiar√° todo para mejor.",
            "Alguien especial est√° pensando en ti en este momento.",
            "Hoy recibir√°s una noticia que te llenar√° de alegr√≠a.",
            "Tu intuici√≥n est√° especialmente aguda hoy. Conf√≠a en ella.",
            "Una puerta que parec√≠a cerrada est√° a punto de abrirse.",
            "Hoy es el d√≠a perfecto para dar el primer paso hacia tu sue√±o.",
            "La suerte favorece a los valientes. ¬°Atr√©vete hoy!",
            "Tu sonrisa ser√° contagiosa y cambiar√° el d√≠a de alguien.",
            "Hoy descubrir√°s un talento oculto que tienes.",
            "Una coincidencia m√°gica est√° esper√°ndote hoy.",
            "Tu energ√≠a positiva atraer√° cosas maravillosas.",
            "Hoy conocer√°s a alguien que se convertir√° en alguien importante.",
            "El √©xito est√° m√°s cerca de lo que imaginas.",
            "Hoy ser√° un d√≠a lleno de peque√±os milagros.",
            "Tu creatividad brillar√° especialmente hoy.",
            "Una oportunidad dorada aparecer√° antes del atardecer.",
            "Hoy tu generosidad te ser√° devuelta multiplicada.",
            "El amor est√° en el aire y te va a encontrar.",
            "Hoy aprender√°s algo que cambiar√° tu perspectiva para mejor.",
            "Tu paciencia ser√° recompensada muy pronto.",
            "Hoy es tu d√≠a para brillar con luz propia.",
            "Una buena noticia llegar√° por una llamada inesperada.",
            "Tu pr√≥ximo 's√≠' te llevar√° a una aventura incre√≠ble.",
            "Hoy encontrar√°s exactamente lo que has estado buscando.",
            "Tu destino est√° aline√°ndose perfectamente hoy.",
            "Hoy alguien te dir√° exactamente lo que necesitas escuchar.",
            "La felicidad que buscas ya est√° en camino hacia ti.",
            "Tu pr√≥ximo encuentro casual no ser√° casualidad.",
            "Hoy descubrir√°s que eres m√°s fuerte de lo que cre√≠as.",
            "Una oportunidad de oro aparecer√° disfrazada de desaf√≠o.",
            "Hoy tu coraz√≥n te guiar√° hacia la decisi√≥n correcta.",
            "El momento perfecto para actuar es ahora.",
            "Hoy recibir√°s una se√±al clara sobre tu camino.",
            "Tu pr√≥xima conversaci√≥n ser√° reveladora y positiva.",
            "Hoy es el d√≠a para convertir tu 'alg√∫n d√≠a' en 'hoy'.",
            "Una sorpresa agradable te est√° esperando al final del d√≠a.",
            "Tu intuici√≥n sobre esa persona era correcta.",
            "Hoy descubrir√°s que tienes m√°s recursos de los que pensabas.",
            "El cambio positivo que has estado esperando comienza hoy.",
            "Tu pr√≥xima idea ser√° brillante y revolucionaria.",
            "Hoy alguien valorar√° tremendamente tu ayuda.",
            "La respuesta que buscas llegar√° de forma inesperada.",
            "Hoy tu coraz√≥n y tu mente estar√°n en perfecta armon√≠a.",
            "Una oportunidad √∫nica se presentar√° antes de las 6 PM.",
            "Hoy redescubrir√°s una pasi√≥n que hab√≠as olvidado.",
            "Tu pr√≥ximo 'no' te librar√° de algo que no te conven√≠a.",
            "Hoy recibir√°s reconocimiento por algo que hiciste bien.",
            "El universo te est√° preparando para algo extraordinario.",
            "Hoy tu optimismo ser√° contagioso y transformador.",
            "Una coincidencia aparentemente menor tendr√° gran impacto positivo.",
            "Hoy descubrir√°s un atajo hacia tu objetivo principal.",
            "Tu pr√≥xima decisi√≥n instintiva ser√° la correcta.",
            "Hoy alguien necesitar√° exactamente lo que t√∫ puedes ofrecer.",
            "La suerte est√° de tu lado en todos los juegos de hoy.",
            "Hoy encontrar√°s inspiraci√≥n en el lugar m√°s inesperado.",
            "Tu pr√≥ximo mensaje importante llegar√° por redes sociales.",
            "Hoy es perfecto para reconectar con alguien especial.",
            "Una oportunidad laboral emocionante se acerca r√°pidamente.",
            "Hoy tu creatividad encontrar√° la soluci√≥n perfecta.",
            "El momento de dar ese paso importante es ahora.",
            "Hoy recibir√°s una invitaci√≥n que cambiar√° tus planes para mejor.",
            "Tu pr√≥xima corazonada ser√° extraordinariamente acertada.",
            "Hoy descubrir√°s que alguien te admira m√°s de lo que pensabas.",
            "Una buena racha est√° a punto de comenzar en tu vida.",
            "Hoy tu generosidad abrir√° puertas inesperadas.",
            "El timing perfecto se alinear√° para tu beneficio hoy.",
            "Hoy encontrar√°s la pieza que faltaba en tu rompecabezas.",
            "Tu pr√≥xima aventura comenzar√° con una simple pregunta.",
            "Hoy alguien te ofrecer√° exactamente lo que necesitas.",
            "La oportunidad de tus sue√±os est√° m√°s cerca que nunca.",
            "Hoy tu instinto te guiar√° hacia la abundancia.",
            "Una noticia fant√°stica llegar√° antes del final de semana.",
            "Hoy redescubrir√°s lo poderoso que realmente eres.",
            "Tu pr√≥xima conversaci√≥n profunda ser√° transformadora.",
            "Hoy el destino trabajar√° obviamente a tu favor.",
            "Una conexi√≥n especial se fortalecer√° significativamente hoy.",
            "Hoy recibir√°s la confirmaci√≥n que has estado esperando.",
            "Tu pr√≥xima idea espont√°nea ser√° tu mejor idea.",
            "Hoy descubrir√°s que ten√≠as raz√≥n sobre esa intuici√≥n.",
            "El momento de brillar que esperabas est√° aqu√≠.",
            "Hoy una peque√±a acci√≥n tuya tendr√° grandes consecuencias positivas.",
            "Tu pr√≥xima oportunidad llegar√° disfrazada de diversi√≥n.",
            "Hoy encontrar√°s el equilibrio perfecto que buscabas.",
            "Una puerta nueva se abrir√° justo cuando la necesites.",
            "Hoy tu autenticidad ser√° tu mayor fortaleza.",
            "El reconocimiento que mereces est√° en camino.",
            "Hoy descubrir√°s un talento que no sab√≠as que ten√≠as.",
            "Tu pr√≥xima 'coincidencia' ser√° una bendici√≥n disfrazada.",
            "Hoy alguien te dar√° el consejo perfecto en el momento justo.",
            "La soluci√≥n creativa que buscas aparecer√° hoy.",
            "Hoy tu paciencia ser√° recompensada abundantemente.",
            "Una oportunidad de crecimiento se presentar√° inesperadamente.",
            "Hoy tu energ√≠a positiva ser√° magn√©tica e irresistible.",
            "El momento para ese cambio importante que contemplas es ahora.",
            "Hoy recibir√°s una segunda oportunidad que no desperdiciar√°s.",
            "Tu pr√≥xima decisi√≥n aparentemente peque√±a tendr√° gran impacto positivo.",
            "Hoy descubrir√°s que eres capaz de mucho m√°s de lo imaginado.",
            "Una sorpresa agradable llegar√° por correo o mensaje hoy.",
            "Hoy tu curiosidad te llevar√° a un descubrimiento fascinante.",
            "El momento perfecto para esa conversaci√≥n importante es hoy.",
            "Hoy encontrar√°s la motivaci√≥n que hab√≠as perdido.",
            "Tu pr√≥xima corazonada sobre dinero ser√° muy acertada.",
            "Hoy alguien reconocer√° p√∫blicamente tu talento √∫nico.",
            "Una oportunidad de viaje emocionante se presentar√° pronto.",
            "Hoy tu instinto para los negocios estar√° especialmente agudo.",
            "El amor verdadero est√° m√°s cerca de lo que crees.",
            "Hoy recibir√°s una llamada que esperabas.",
            "Tu pr√≥ximo proyecto ser√° un √©xito rotundo.",
            "Hoy encontrar√°s dinero que hab√≠as olvidado.",
            "Una persona influyente notar√° tu trabajo.",
            "Hoy tu risa ser√° medicina para alguien.",
            "La inversi√≥n que hiciste dar√° frutos pronto.",
            "Hoy descubrir√°s una nueva habilidad valiosa.",
            "Tu pr√≥xima foto ser√° perfecta.",
            "Hoy recibir√°s un cumplido sincero.",
            "Una oportunidad de aprendizaje llegar√° inesperadamente.",
            "Hoy tu intuici√≥n sobre tecnolog√≠a ser√° acertada.",
            "El libro perfecto llegar√° a tus manos.",
            "Hoy har√°s una conexi√≥n valiosa en redes sociales.",
            "Tu pr√≥xima compra ser√° una excelente decisi√≥n.",
            "Hoy encontrar√°s la respuesta en una conversaci√≥n casual.",
            "Una colaboraci√≥n exitosa est√° en el horizonte.",
            "Hoy tu creatividad resolver√° un problema antiguo.",
            "El momento perfecto para ese cambio de look es ahora.",
            "Hoy recibir√°s una oferta que no podr√°s rechazar.",
            "Tu pr√≥ximo fin de semana ser√° memorable.",
            "Hoy descubrir√°s un lugar que te encantar√°.",
            "Una amistad especial se profundizar√° hoy.",
            "Hoy tu organizaci√≥n te ahorrar√° tiempo valioso.",
            "El hobby que inicies hoy te dar√° grandes satisfacciones.",
            "Hoy recibir√°s noticias sobre una oportunidad educativa.",
            "Tu pr√≥xima decisi√≥n financiera ser√° muy inteligente.",
            "Hoy encontrar√°s la inspiraci√≥n para un nuevo proyecto.",
            "Una habilidad del pasado ser√° √∫til inesperadamente.",
            "Hoy tu amabilidad ser√° recordada por a√±os.",
            "El consejo que des hoy cambiar√° una vida.",
            "Hoy descubrir√°s que alguien conf√≠a profundamente en ti.",
            "Tu pr√≥xima meta se alcanzar√° m√°s r√°pido de lo esperado.",
            "Hoy encontrar√°s tiempo para algo que realmente disfrutas.",
            "Una oportunidad de ayudar se convertir√° en una bendici√≥n mutua.",
            "Hoy tu perspectiva √∫nica ser√° muy valorada.",
            "El regalo perfecto para alguien especial se revelar√° hoy.",
            "Hoy recibir√°s confirmaci√≥n de que est√°s en el camino correcto.",
            "Tu pr√≥xima aventura culinaria ser√° deliciosa.",
            "Hoy descubrir√°s m√∫sica que tocar√° tu alma.",
            "Una tecnolog√≠a nueva facilitar√° tu vida significativamente.",
            "Hoy tu paciencia con otros ser√° profundamente apreciada.",
            "El momento perfecto para esa llamada importante es ahora.",
            "Hoy encontrar√°s una soluci√≥n elegante a un problema complejo.",
            "Tu pr√≥xima conversaci√≥n con familia ser√° especialmente c√°lida.",
            "Hoy descubrir√°s que alguien ha estado hablando bien de ti.",
            "Una peque√±a inversi√≥n de tiempo hoy tendr√° grandes dividendos.",
            "Hoy tu instinto sobre personas ser√° extraordinariamente preciso.",
            "El momento de actuar sobre esa idea brillante es ahora.",
            "Hoy recibir√°s validaci√≥n sobre una decisi√≥n pasada.",
            "Tu pr√≥xima sonrisa causar√° una reacci√≥n en cadena de alegr√≠a.",
            "Hoy encontrar√°s belleza en algo completamente ordinario.",
            "Una oportunidad de liderazgo se presentar√° naturalmente.",
            "Hoy tu energ√≠a elevar√° el √°nimo de todo tu entorno."
        ];

        const neutralMessages = [
            "Las respuestas que buscas est√°n m√°s cerca de lo que imaginas.",
            "Hoy es un d√≠a para observar y aprender en silencio.",
            "El cambio que esperas requiere una decisi√≥n que solo t√∫ puedes tomar.",
            "Alguien en tu vida necesita que seas t√∫ mismo, sin m√°scaras.",
            "Hoy notar√°s algo que has pasado por alto durante semanas.",
            "La verdad sobre una situaci√≥n se revelar√° gradualmente.",
            "Tu perspectiva sobre algo importante est√° a punto de evolucionar.",
            "Hoy es un d√≠a para escuchar m√°s y hablar menos.",
            "Una lecci√≥n del pasado ser√° relevante en el presente.",
            "El timing de las cosas no siempre est√° bajo tu control.",
            "Hoy ver√°s una situaci√≥n desde un √°ngulo completamente nuevo.",
            "La paciencia que necesitas desarrollar se pondr√° a prueba.",
            "Alguien te est√° observando m√°s de lo que te das cuenta.",
            "Hoy es un d√≠a para tomar decisiones basadas en hechos, no emociones.",
            "La informaci√≥n que necesitas llegar√° cuando est√©s listo para recibirla.",
            "Tu intuici√≥n y tu l√≥gica est√°n envi√°ndote mensajes diferentes.",
            "Hoy notar√°s patrones que se repiten en tu vida.",
            "Una conversaci√≥n pendiente finalmente tendr√° lugar.",
            "El valor de algo que posees se har√° evidente hoy.",
            "Hoy es un d√≠a para reflexionar sobre tus prioridades reales.",
            "La soluci√≥n a tu problema principal requiere un enfoque diferente.",
            "Alguien del pasado podr√≠a reaparecer en tu vida de alguna manera.",
            "Hoy te dar√°s cuenta de algo que has estado negando.",
            "El momento de tomar esa decisi√≥n pendiente se acerca.",
            "Tu percepci√≥n sobre alguien cercano cambiar√° sutilmente.",
            "Hoy es un d√≠a para observar las consecuencias de decisiones pasadas.",
            "La respuesta que buscas est√° en una conversaci√≥n que evitas.",
            "Algo que considerabas permanente puede ser m√°s temporal de lo pensado.",
            "Hoy notar√°s la diferencia entre lo que quieres y lo que necesitas.",
            "Una habilidad dormida en ti comenzar√° a despertar.",
            "El equilibrio entre dar y recibir en tu vida requiere atenci√≥n.",
            "Hoy ver√°s las cosas como realmente son, no como esperas que sean.",
            "La importancia de algo aparentemente menor se har√° clara.",
            "Tu comprensi√≥n sobre un tema complejo se profundizar√°.",
            "Hoy es un d√≠a para cuestionar suposiciones que das por sentadas.",
            "El significado de una experiencia pasada finalmente tendr√° sentido.",
            "Alguien necesita tu perspectiva, aunque no te lo haya pedido.",
            "Hoy notar√°s la diferencia entre estar ocupado y ser productivo.",
            "Una verdad inc√≥moda requerir√° tu atenci√≥n.",
            "El momento de honest introspecci√≥n ha llegado.",
            "Hoy ver√°s las consecuencias de postergar una decisi√≥n importante.",
            "La l√≠nea entre lo personal y lo profesional en tu vida necesita definici√≥n.",
            "Algo que has estado evitando finalmente demandar√° tu atenci√≥n.",
            "Hoy notar√°s c√≥mo tus palabras afectan a otros m√°s de lo que cre√≠as.",
            "El valor de la simplicidad se har√° evidente en algo complejo.",
            "Una creencia que tienes ser√° desafiada por nueva informaci√≥n.",
            "Hoy es un d√≠a para distinguir entre lo urgente y lo importante.",
            "La diferencia entre ser correcto y ser efectivo se clarificar√°.",
            "Alguien te mostrar√° una faceta de s√≠ mismo que no conoc√≠as.",
            "Hoy notar√°s que algo que tem√≠as no era tan grave como pensabas.",
            "El costo real de una decisi√≥n se har√° visible.",
            "Tu definici√≥n de √©xito puede necesitar una actualizaci√≥n.",
            "Hoy ver√°s el impacto acumulativo de peque√±as acciones diarias.",
            "Una situaci√≥n ambigua finalmente tomar√° una direcci√≥n clara.",
            "El momento de dejar ir algo que ya no te sirve est√° llegando.",
            "Hoy notar√°s la diferencia entre reaccionar y responder.",
            "Alguien te dar√° informaci√≥n que cambiar√° tu perspectiva sobre algo.",
            "El valor de mantener ciertas cosas privadas se har√° evidente.",
            "Hoy es un d√≠a para evaluar la calidad de tus relaciones.",
            "Una inversi√≥n de tiempo del pasado comenzar√° a mostrar resultados.",
            "La importancia de tu presencia f√≠sica en ciertos lugares se clarificar√°.",
            "Hoy notar√°s que algo que cre√≠as conocer bien tiene m√°s profundidad.",
            "El momento de ser completamente honesto contigo mismo ha llegado.",
            "Una rutina que has mantenido necesita ser examinada cr√≠ticamente.",
            "Hoy ver√°s c√≥mo tu estado de √°nimo afecta tu percepci√≥n de la realidad.",
            "La diferencia entre lo que dices y lo que haces ser√° notable.",
            "Alguien te har√° una pregunta que no esperabas.",
            "Hoy notar√°s el impacto de una decisi√≥n que tomaste hace tiempo.",
            "El verdadero motivo detr√°s de una acci√≥n se revelar√°.",
            "Tu comprensi√≥n sobre lo que realmente te motiva se profundizar√°.",
            "Hoy es un d√≠a para observar sin juzgar.",
            "La conexi√≥n entre dos eventos aparentemente no relacionados se har√° clara.",
            "Una habilidad que subestimas en ti mismo ser√° relevante.",
            "Hoy notar√°s que algo que considerabas fijo puede cambiar.",
            "El momento de revisar tus estrategias actuales ha llegado.",
            "Una conversaci√≥n que has estado posponiendo necesita suceder.",
            "Hoy ver√°s el mundo a trav√©s de los ojos de otra persona.",
            "La diferencia entre lo que piensas y lo que sientes ser√° evidente.",
            "Algo que has estado midiendo por m√©trica equivocada se clarificar√°.",
            "Hoy notar√°s patrones en tu comportamiento que requieren atenci√≥n.",
            "El valor de una relaci√≥n en tu vida se har√° m√°s evidente.",
            "Una decisi√≥n que cre√≠as menor tendr√° implicaciones mayores.",
            "Hoy es un d√≠a para distinguir entre hechos y interpretaciones.",
            "La importancia del timing en una situaci√≥n espec√≠fica se revelar√°.",
            "Alguien te mostrar√° una manera diferente de ver las cosas.",
            "Hoy notar√°s la diferencia entre ser productivo y estar ocupado.",
            "El momento de actualizar una opini√≥n que tienes ha llegado.",
            "Una inversi√≥n emocional del pasado necesita ser evaluada.",
            "Hoy ver√°s las consecuencias de no comunicarte claramente.",
            "La relaci√≥n entre causa y efecto en tu vida ser√° m√°s visible.",
            "Algo que has estado ignorando requerir√° tu reconocimiento.",
            "Hoy notar√°s c√≥mo los peque√±os detalles afectan el panorama general.",
            "El valor de la consistencia versus la flexibilidad se clarificar√°.",
            "Una situaci√≥n te ense√±ar√° algo sobre tus propios l√≠mites.",
            "Hoy es un d√≠a para observar tus reacciones autom√°ticas.",
            "La diferencia entre lo que esperas y la realidad ser√° notable.",
            "Alguien te dar√° perspectiva sobre algo que has estado considerando.",
            "Hoy notar√°s el efecto de tus h√°bitos en tu vida diaria.",
            "El momento de reevaluar una relaci√≥n importante ha llegado.",
            "Una creencia que tienes sobre ti mismo ser√° puesta a prueba.",
            "Hoy ver√°s c√≥mo tu entorno f√≠sico afecta tu estado mental.",
            "La importancia de una decisi√≥n aparentemente menor se revelar√°.",
            "Algo que has estado dando por sentado necesita tu atenci√≥n consciente.",
            "Hoy notar√°s la diferencia entre estar presente y estar distra√≠do.",
            "El valor de una experiencia pasada se har√° m√°s claro.",
            "Una situaci√≥n te mostrar√° algo sobre tu nivel de tolerancia.",
            "Hoy es un d√≠a para examinar tus motivaciones reales.",
            "La diferencia entre lo que necesitas y lo que quieres ser√° evidente.",
            "Alguien te ayudar√° a ver algo desde una perspectiva diferente.",
            "Hoy notar√°s c√≥mo tu estado f√≠sico afecta tu estado mental.",
            "El momento de ser m√°s selectivo con tu tiempo y energ√≠a ha llegado.",
            "Una conversaci√≥n revelar√° informaci√≥n que no esperabas.",
            "Hoy ver√°s el impacto de las expectativas no comunicadas.",
            "La importancia de mantener ciertas rutinas se har√° evidente.",
            "Algo que has estado subestimando mostrar√° su verdadero valor.",
            "Hoy notar√°s la diferencia entre reaccionar emocionalmente y responder conscientemente.",
            "El momento de hacer una distinci√≥n importante ha llegado.",
            "Una situaci√≥n te ense√±ar√° algo sobre la naturaleza del cambio.",
            "Hoy es un d√≠a para observar c√≥mo influyes en otros sin darte cuenta.",
            "La relaci√≥n entre tu estado interno y tus circunstancias externas ser√° clara.",
            "Alguien te mostrar√° un aspecto de una situaci√≥n que no hab√≠as considerado.",
            "Hoy notar√°s el costo de oportunidad de algunas de tus elecciones.",
            "El valor de la preparaci√≥n versus la espontaneidad se clarificar√°.",
            "Una experiencia te dar√° insight sobre tus propias contradicciones.",
            "Hoy ver√°s c√≥mo las peque√±as inconsistencias se acumulan con el tiempo.",
            "La importancia de un detalle que has estado ignorando se revelar√°.",
            "Algo que cre√≠as entender completamente mostrar√° m√°s complejidad.",
            "Hoy notar√°s la diferencia entre lo que dices que valoras y lo que realmente priorizas.",
            "El momento de reconocer un patr√≥n repetitivo en tu vida ha llegado.",
            "Una situaci√≥n te mostrar√° algo sobre tu capacidad de adaptaci√≥n.",
            "Hoy es un d√≠a para observar las gaps entre tus intenciones y tus acciones.",
            "La diferencia entre ser reactivo y ser proactivo ser√° evidente.",
            "Alguien te dar√° informaci√≥n que conectar√° puntos que no hab√≠as unido.",
            "Hoy notar√°s c√≥mo tus suposiciones influyen en tu percepci√≥n.",
            "El valor de una pausa reflexiva antes de actuar se har√° claro.",
            "Una conversaci√≥n te mostrar√° algo sobre tus propios sesgos.",
            "Hoy ver√°s el impacto acumulativo de decisiones aparentemente menores.",
            "La importancia de cuestionar el status quo en alg√∫n √°rea se revelar√°.",
            "Algo que has estado haciendo autom√°ticamente necesita ser reconsiderado.",
            "Hoy notar√°s la diferencia entre estar c√≥modo y estar complaciente.",
            "El momento de evaluar la sostenibilidad de tus patrones actuales ha llegado.",
            "Una situaci√≥n te ense√±ar√° algo sobre el equilibrio entre control y aceptaci√≥n.",
            "Hoy es un d√≠a para observar c√≥mo tu historia personal influye en tus decisiones presentes.",
            "La diferencia entre lo que es posible y lo que es probable se clarificar√°.",
            "Alguien te ayudar√° a ver una situaci√≥n con mayor objetividad.",
            "Hoy notar√°s el efecto de tus expectativas no expresadas en las relaciones.",
            "El valor de la honestidad versus la diplomacia se pondr√° en cuesti√≥n.",
            "Una experiencia te dar√° claridad sobre algo que has estado evitando examinar.",
            "Hoy ver√°s c√≥mo tu necesidad de control afecta una situaci√≥n espec√≠fica.",
            "La importancia de los matices en una comunicaci√≥n importante se revelar√°.",
            "Algo que has categorizado de una manera puede necesitar una nueva clasificaci√≥n.",
            "Hoy notar√°s la diferencia entre estar informado y entender realmente.",
            "El momento de integrar conocimiento disperso en sabidur√≠a pr√°ctica ha llegado.",
            "Una situaci√≥n te mostrar√° algo sobre tu relaci√≥n con la incertidumbre.",
            "Hoy es un d√≠a para observar c√≥mo tus valores se manifiestan en acciones concretas.",
            "La diferencia entre lo que es c√≥modo y lo que es correcto ser√° evidente.",
            "Alguien te dar√° perspectiva sobre algo que has estado viendo de manera limitada.",
            "Hoy notar√°s el impacto de no haber dicho algo que necesitabas decir.",
            "El valor de maintener algunas cosas ambiguas versus buscar claridad total se revelar√°."
        ];

        // NUEVO: Sistema de sponsors simult√°neos
        class SimultaneousSponsorsSystem {
            constructor() {
                this.sponsorUrls = this.initializePrioritizedSponsors();
                this.timers = {};
                this.totalRevenue = 0;
                this.sessionStats = {
                    totalViews: 0,
                    platformBreakdown: {},
                    averageViewTime: 10,
                    totalRevenue: 0
                };
            }
            
            // ===============================================
            // SPONSORS ORGANIZADOS POR NIVELES DE PRIORIDAD
            // ===============================================
            
            initializePrioritizedSponsors() {
                const allSponsors = {
                    // ü•á NIVEL 1: M√ÅXIMA MONETIZACI√ìN (‚Ç¨0.12-0.22)
                    tier1_high_revenue: [
                        {
                            url: `https://www.bluehost.com/embed-widget/?affiliate=${completeMonetizationEngine.affiliateIds.bluehost}`,
                            revenue: 0.22,
                            category: 'bluehost',
                            label: 'Web Hosting',
                            requiresAffiliate: true,
                            priority: 1
                        },
                        {
                            url: `https://nordvpn.com/es/embed-widget/?utm_source=${completeMonetizationEngine.affiliateIds.nordvpn}`,
                            revenue: 0.20,
                            category: 'nordvpn',
                            label: 'Seguridad VPN',
                            requiresAffiliate: true,
                            priority: 1
                        },
                        {
                            url: `https://www.booking.com/flexiapi/identity/mobile/searchboxWidgets/boxes/map-box.html?aid=${completeMonetizationEngine.affiliateIds.booking}&ss=Madrid`,
                            revenue: 0.18,
                            category: 'booking',
                            label: 'Ofertas Madrid',
                            requiresAffiliate: true,
                            priority: 1
                        },
                        {
                            url: `https://www.booking.com/flexiapi/identity/mobile/searchboxWidgets/boxes/map-box.html?aid=${completeMonetizationEngine.affiliateIds.booking}&ss=Barcelona`,
                            revenue: 0.18,
                            category: 'booking',
                            label: 'Ofertas BCN',
                            requiresAffiliate: true,
                            priority: 1
                        }
                    ],
                    
                    // ü•à NIVEL 2: ALTA MONETIZACI√ìN (‚Ç¨0.10-0.15)
                    tier2_medium_revenue: [
                        {
                            url: `https://www.udemy.com/embed/course-widget/?course_id=trending&affiliate=${completeMonetizationEngine.affiliateIds.udemy}`,
                            revenue: 0.15,
                            category: 'udemy',
                            label: 'Cursos Online',
                            requiresAffiliate: true,
                            priority: 2
                        },
                        {
                            url: `https://www.udemy.com/embed/course-widget/?course_id=development&affiliate=${completeMonetizationEngine.affiliateIds.udemy}`,
                            revenue: 0.14,
                            category: 'udemy',
                            label: 'Programaci√≥n',
                            requiresAffiliate: true,
                            priority: 2
                        },
                        {
                            url: `https://widgets.amazon.es/Amazon-Widget?tag=${completeMonetizationEngine.affiliateIds.amazon}&category=bestsellers`,
                            revenue: 0.12,
                            category: 'amazon',
                            label: 'Amazon Top',
                            requiresAffiliate: true,
                            priority: 2
                        },
                        {
                            url: `https://widget.aliexpress.com/widget?affiliateId=${completeMonetizationEngine.affiliateIds.aliexpress}&category=electronics`,
                            revenue: 0.10,
                            category: 'aliexpress',
                            label: 'AliExpress Tech',
                            requiresAffiliate: true,
                            priority: 2
                        }
                    ],
                    
                    // ü•â NIVEL 3: MONETIZACI√ìN MEDIA (‚Ç¨0.05-0.08)
                    tier3_low_revenue: [
                        {
                            url: 'https://www.youtube.com/embed/videoseries?list=PLFgquLnL59alCl_2TQvOiD5Vgm1hCaGSI&autoplay=1&mute=1&controls=0&modestbranding=1',
                            revenue: 0.08,
                            category: 'youtube',
                            label: 'YouTube Viral',
                            requiresAffiliate: false,
                            priority: 3
                        },
                        {
                            url: 'https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&mute=1&controls=0&modestbranding=1&rel=0',
                            revenue: 0.07,
                            category: 'youtube',
                            label: 'YouTube Trending',
                            requiresAffiliate: false,
                            priority: 3
                        },
                        {
                            url: 'https://player.twitch.tv/?channel=thegrefg&parent=localhost&autoplay=false&muted=true',
                            revenue: 0.07,
                            category: 'twitch',
                            label: 'Twitch Live',
                            requiresAffiliate: false,
                            priority: 3
                        },
                        {
                            url: 'https://player.twitch.tv/?channel=elrubius&parent=localhost&autoplay=false&muted=true',
                            revenue: 0.07,
                            category: 'twitch',
                            label: 'Twitch Gaming',
                            requiresAffiliate: false,
                            priority: 3
                        },
                        {
                            url: 'https://open.spotify.com/embed/playlist/37i9dQZF1DXcBWIGoYBM5M?utm_source=generator&theme=0',
                            revenue: 0.05,
                            category: 'spotify',
                            label: 'Spotify Top 50',
                            requiresAffiliate: false,
                            priority: 3
                        }
                    ],
                    
                    // üö® NIVEL 4: FALLBACK PURO (‚Ç¨0.01-0.04) - SOLO SI FALLAN TODOS LOS ANTERIORES
                    tier4_fallback_only: [
                        {
                            url: 'https://giphy.com/embed/trending',
                            revenue: 0.04,
                            category: 'entertainment',
                            label: 'GIFs Virales',
                            requiresAffiliate: false,
                            priority: 4
                        },
                        {
                            url: 'https://player.vimeo.com/video/148751763?autoplay=1&muted=1&controls=0',
                            revenue: 0.03,
                            category: 'entertainment',
                            label: 'Videos Virales',
                            requiresAffiliate: false,
                            priority: 4
                        },
                        {
                            url: 'https://www.reddit.com/r/funny',
                            revenue: 0.02,
                            category: 'reddit',
                            label: 'Reddit Funny',
                            requiresAffiliate: false,
                            priority: 4
                        },
                        {
                            url: 'https://9gag.com/trending',
                            revenue: 0.01,
                            category: 'entertainment',
                            label: '9GAG Trending',
                            requiresAffiliate: false,
                            priority: 4
                        }
                    ]
                };
                
                // ‚úÖ APLICAR FILTROS DE DISPONIBILIDAD POR PRIORIDAD
                const availableSponsors = this.filterSponsorsByAvailability(allSponsors);
                
                return availableSponsors;
            }
            
            // ===============================================
            // FILTRADO INTELIGENTE CON SISTEMA DE PRIORIDADES
            // ===============================================
            
            filterSponsorsByAvailability(sponsorTiers) {
                const availableSponsors = [];
                let priorityStats = {
                    tier1: { available: 0, total: 0 },
                    tier2: { available: 0, total: 0 },
                    tier3: { available: 0, total: 0 },
                    tier4: { available: 0, total: 0 }
                };
                
                // Procesar cada tier por orden de prioridad
                Object.entries(sponsorTiers).forEach(([tierName, sponsors]) => {
                    const tierNumber = parseInt(tierName.charAt(4));
                    const tierKey = `tier${tierNumber}`;
                    
                    priorityStats[tierKey].total = sponsors.length;
                    
                    sponsors.forEach(sponsor => {
                        if (sponsor.requiresAffiliate) {
                            // Verificar si tenemos ID de afiliado v√°lido
                            const hasValidAffiliate = completeMonetizationEngine.availableAffiliates.available[sponsor.category];
                            
                            if (hasValidAffiliate) {
                                availableSponsors.push(sponsor);
                                priorityStats[tierKey].available++;
                                console.log(`‚úÖ TIER ${tierNumber} - ${sponsor.label}: Habilitado (${sponsor.revenue}‚Ç¨)`);
                            } else {
                                console.log(`‚ùå TIER ${tierNumber} - ${sponsor.label}: Sin ID afiliado`);
                            }
                        } else {
                            // Sponsors sin afiliaci√≥n siempre disponibles
                            availableSponsors.push(sponsor);
                            priorityStats[tierKey].available++;
                            console.log(`‚úÖ TIER ${tierNumber} - ${sponsor.label}: Siempre disponible (${sponsor.revenue}‚Ç¨)`);
                        }
                    });
                });
                
                // ‚úÖ LOGGING DE PRIORIDADES
                console.log('\nüèÜ RESUMEN DE PRIORIDADES:');
                console.log(`Tier 1 (‚Ç¨0.18-0.22): ${priorityStats.tier1.available}/${priorityStats.tier1.total} disponibles`);
                console.log(`Tier 2 (‚Ç¨0.10-0.15): ${priorityStats.tier2.available}/${priorityStats.tier2.total} disponibles`);
                console.log(`Tier 3 (‚Ç¨0.05-0.08): ${priorityStats.tier3.available}/${priorityStats.tier3.total} disponibles`);
                console.log(`Tier 4 (‚Ç¨0.01-0.04): ${priorityStats.tier4.available}/${priorityStats.tier4.total} disponibles`);
                
                return availableSponsors;
            }
            
            // ===============================================
            // SELECCI√ìN INTELIGENTE CON PRIORIDAD ABSOLUTA A MONETIZACI√ìN
            // ===============================================
            
            selectOptimalSponsors() {
                const hour = new Date().getHours();
                const day = new Date().getDay();
                const userAgent = navigator.userAgent.toLowerCase();
                const isMobile = userAgent.includes('mobile');
                const isWeekend = day === 0 || day === 6;
                
                // ‚úÖ PASO 1: ORGANIZAR POR PRIORIDADES
                const tier1 = this.sponsorUrls.filter(s => s.priority === 1);
                const tier2 = this.sponsorUrls.filter(s => s.priority === 2);
                const tier3 = this.sponsorUrls.filter(s => s.priority === 3);
                const tier4 = this.sponsorUrls.filter(s => s.priority === 4);
                
                console.log('\nüéØ SELECCI√ìN CON PRIORIDAD DE MONETIZACI√ìN:');
                console.log(`Tier 1 disponibles: ${tier1.length}`);
                console.log(`Tier 2 disponibles: ${tier2.length}`);
                console.log(`Tier 3 disponibles: ${tier3.length}`);
                console.log(`Tier 4 disponibles: ${tier4.length}`);
                
                // ‚úÖ PASO 2: L√ìGICA DE SELECCI√ìN PRIORIZADA
                let selectedSponsors = [];
                let reason = '';
                
                if (tier1.length >= 2) {
                    // ü•á IDEAL: 2 sponsors de m√°ximo revenue
                    selectedSponsors = this.selectFromTier(tier1, 2);
                    reason = `Tier 1 - M√°xima monetizaci√≥n (‚Ç¨${(selectedSponsors[0].revenue + selectedSponsors[1].revenue).toFixed(3)} total)`;
                    
                } else if (tier1.length === 1 && tier2.length >= 1) {
                    // ü•áü•à BUENO: 1 de tier1 + 1 de tier2
                    selectedSponsors.push(tier1[0]);
                    selectedSponsors.push(this.selectFromTier(tier2, 1)[0]);
                    reason = `Tier 1+2 - Alta monetizaci√≥n (‚Ç¨${(selectedSponsors[0].revenue + selectedSponsors[1].revenue).toFixed(3)} total)`;
                    
                } else if (tier2.length >= 2) {
                    // ü•à ACEPTABLE: 2 sponsors de tier2
                    selectedSponsors = this.selectFromTier(tier2, 2);
                    reason = `Tier 2 - Monetizaci√≥n media-alta (‚Ç¨${(selectedSponsors[0].revenue + selectedSponsors[1].revenue).toFixed(3)} total)`;
                    
                } else if ((tier1.length + tier2.length) >= 1 && tier3.length >= 1) {
                    // ü•àü•â BACKUP: Combinar tiers altos con tier3
                    const highTier = [...tier1, ...tier2];
                    selectedSponsors.push(highTier[0]);
                    selectedSponsors.push(this.selectFromTier(tier3, 1)[0]);
                    reason = `Tier Mix - Monetizaci√≥n combinada (‚Ç¨${(selectedSponsors[0].revenue + selectedSponsors[1].revenue).toFixed(3)} total)`;
                    
                } else if (tier3.length >= 2) {
                    // ü•â SOLO SI NO HAY OPCIONES MEJORES: tier3
                    selectedSponsors = this.selectFromTier(tier3, 2);
                    reason = `Tier 3 - Monetizaci√≥n b√°sica (‚Ç¨${(selectedSponsors[0].revenue + selectedSponsors[1].revenue).toFixed(3)} total)`;
                    
                } else {
                    // üö® √öLTIMO RECURSO: Usar tier4 (fallback puro)
                    console.log('‚ö†Ô∏è ADVERTENCIA: Usando sponsors de fallback - Configurar m√°s afiliaciones para maximizar revenue');
                    
                    const availableFallbacks = [...tier3, ...tier4];
                    if (availableFallbacks.length >= 2) {
                        selectedSponsors = this.selectFromTier(availableFallbacks, 2);
                        reason = `Fallback - Revenue m√≠nimo (‚Ç¨${(selectedSponsors[0].revenue + selectedSponsors[1].revenue).toFixed(3)} total)`;
                    } else {
                        // Emergencia total
                        selectedSponsors = this.createEmergencySponsors();
                        reason = 'Emergencia - Sponsors creados din√°micamente';
                    }
                }
                
                // ‚úÖ PASO 3: APLICAR OPTIMIZACIONES CONTEXTUALES (SOLO DENTRO DEL TIER SELECCIONADO)
                selectedSponsors = this.applyContextualOptimizations(selectedSponsors, hour, isMobile, isWeekend);
                
                console.log(`üéØ ESTRATEGIA: ${reason}`);
                console.log(`üí∞ REVENUE ESPERADO: ‚Ç¨${(selectedSponsors[0].revenue + selectedSponsors[1].revenue).toFixed(3)}`);
                
                return {
                    sponsor1: selectedSponsors[0],
                    sponsor2: selectedSponsors[1],
                    reason,
                    optimization: {
                        hour,
                        isMobile,
                        isWeekend,
                        totalRevenue: selectedSponsors[0].revenue + selectedSponsors[1].revenue,
                        averageRevenue: (selectedSponsors[0].revenue + selectedSponsors[1].revenue) / 2,
                        tier1Count: tier1.length,
                        tier2Count: tier2.length,
                        tier3Count: tier3.length,
                        tier4Count: tier4.length
                    }
                };
            }
            
            selectFromTier(tierSponsors, count) {
                if (tierSponsors.length <= count) {
                    return tierSponsors;
                }
                
                // Selecci√≥n aleatoria dentro del tier para variedad
                const selected = [];
                const available = [...tierSponsors];
                
                for (let i = 0; i < count; i++) {
                    const randomIndex = Math.floor(Math.random() * available.length);
                    selected.push(available[randomIndex]);
                    available.splice(randomIndex, 1);
                }
                
                return selected;
            }
            
            applyContextualOptimizations(selectedSponsors, hour, isMobile, isWeekend) {
                // Estas optimizaciones solo reordenan, no cambian la selecci√≥n por prioridad
                
                if (selectedSponsors.length < 2) return selectedSponsors;
                
                const [sponsor1, sponsor2] = selectedSponsors;
                
                // Priorizar sponsor con mayor revenue para sponsor1
                if (sponsor2.revenue > sponsor1.revenue) {
                    console.log(`üîÑ Intercambiando sponsors: ${sponsor2.label} (‚Ç¨${sponsor2.revenue}) antes que ${sponsor1.label} (‚Ç¨${sponsor1.revenue})`);
                    return [sponsor2, sponsor1];
                }
                
                return selectedSponsors;
            }
            
            createEmergencySponsors() {
                console.log('üö® EMERGENCIA: Creando sponsors de √∫ltimo recurso');
                
                return [
                    {
                        url: 'https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&mute=1&controls=0',
                        revenue: 0.02,
                        category: 'emergency',
                        label: 'YouTube Emergency',
                        requiresAffiliate: false,
                        priority: 5
                    },
                    {
                        url: 'https://9gag.com/trending',
                        revenue: 0.01,
                        category: 'emergency',
                        label: '9GAG Emergency',
                        requiresAffiliate: false,
                        priority: 5
                    }
                ];
            }
            
            // ===============================================
            // RESTO DE FUNCIONES SIN CAMBIOS
            // ===============================================
            
            setupSponsorFrames() {
                const sponsor1Frame = document.querySelector('#sponsor1 iframe');
                const sponsor2Frame = document.querySelector('#sponsor2 iframe');
                
                if (!sponsor1Frame || !sponsor2Frame) {
                    console.error('‚ùå No se encontraron los frames de sponsors');
                    return;
                }
                
                // ‚úÖ SELECCI√ìN CON PRIORIDAD DE MONETIZACI√ìN
                const selectedSponsors = this.selectOptimalSponsors();
                
                const url1 = selectedSponsors.sponsor1;
                const url2 = selectedSponsors.sponsor2;
                
                // Configurar frames con URLs optimizadas
                sponsor1Frame.src = url1.url;
                sponsor2Frame.src = url2.url;
                
                // Guardar datos de revenue y metadata
                sponsor1Frame.dataset.revenue = url1.revenue;
                sponsor1Frame.dataset.category = url1.category;
                sponsor1Frame.dataset.label = url1.label;
                sponsor1Frame.dataset.priority = url1.priority;
                
                sponsor2Frame.dataset.revenue = url2.revenue;
                sponsor2Frame.dataset.category = url2.category;
                sponsor2Frame.dataset.label = url2.label;
                sponsor2Frame.dataset.priority = url2.priority;
                
                // Actualizar labels en la UI
                const label1 = document.querySelector('#sponsor1 .sponsor-label');
                const label2 = document.querySelector('#sponsor2 .sponsor-label');
                
                if (label1) label1.textContent = url1.label;
                if (label2) label2.textContent = url2.label;
                
                // Tracking mejorado con prioridades
                this.trackSponsorSelection(url1, url2);
                this.logSponsorConfiguration(url1, url2);
                
                console.log('üì∫ Sponsors configurados con PRIORIDAD DE MONETIZACI√ìN:', {
                    sponsor1: { 
                        priority: `Tier ${url1.priority}`,
                        category: url1.category,
                        label: url1.label,
                        revenue: url1.revenue,
                        url: url1.url.substring(0, 50) + '...'
                    },
                    sponsor2: { 
                        priority: `Tier ${url2.priority}`,
                        category: url2.category,
                        label: url2.label,
                        revenue: url2.revenue,
                        url: url2.url.substring(0, 50) + '...'
                    },
                    totalRevenue: (url1.revenue + url2.revenue).toFixed(3),
                    strategy: selectedSponsors.reason
                });
            }
            
            // ... resto de funciones existentes sin cambios ...
            
        }

        // ===============================================
        // FUNCI√ìN DE AN√ÅLISIS DE PRIORIDADES
        // ===============================================

        function showMonetizationPriorities() {
            console.log('\nüèÜ AN√ÅLISIS DE PRIORIDADES DE MONETIZACI√ìN');
            console.log('==========================================');
            
            const sponsorsSystem = new SimultaneousSponsorsSystem();
            const sponsors = sponsorsSystem.sponsorUrls;
            
            // Agrupar por tiers
            const tiers = {
                1: sponsors.filter(s => s.priority === 1),
                2: sponsors.filter(s => s.priority === 2),
                3: sponsors.filter(s => s.priority === 3),
                4: sponsors.filter(s => s.priority === 4)
            };
            
            Object.entries(tiers).forEach(([tier, tierSponsors]) => {
                if (tierSponsors.length > 0) {
                    console.log(`\nü•á TIER ${tier}:`);
                    tierSponsors.forEach(sponsor => {
                        const status = sponsor.requiresAffiliate ? 
                            (completeMonetizationEngine.availableAffiliates.available[sponsor.category] ? '‚úÖ' : '‚ùå') : 
                            '‚úÖ';
                        console.log(`  ${status} ${sponsor.label}: ‚Ç¨${sponsor.revenue} (${sponsor.category})`);
                    });
                }
            });
            
            // Calcular revenue total por tier
            console.log('\nüí∞ REVENUE POTENCIAL POR TIER:');
            Object.entries(tiers).forEach(([tier, tierSponsors]) => {
                if (tierSponsors.length > 0) {
                    const availableSponsors = tierSponsors.filter(s => 
                        !s.requiresAffiliate || completeMonetizationEngine.availableAffiliates.available[s.category]
                    );
                    const maxRevenue = availableSponsors.length >= 2 ? 
                        availableSponsors.sort((a,b) => b.revenue - a.revenue).slice(0,2).reduce((sum, s) => sum + s.revenue, 0) :
                        availableSponsors.reduce((sum, s) => sum + s.revenue, 0);
                    
                    console.log(`  Tier ${tier}: ‚Ç¨${maxRevenue.toFixed(3)} (${availableSponsors.length}/${tierSponsors.length} disponibles)`);
                }
            });
            
            return tiers;
        }

        // Hacer funci√≥n accesible globalmente
        window.showMonetizationPriorities = showMonetizationPriorities;
        
        // MODIFICADO: Sistema de revelaci√≥n gradual con sponsors
        class GradualRevealSystem {
            constructor() {
                this.revealDuration = 10000;
                this.currentStep = 0;
                this.totalSteps = 10;
                this.revealTimer = null;
                this.countdownTimer = null;
                this.isRevealing = false;
                this.sponsorsSystem = new SimultaneousSponsorsSystem();
            }
            
            getCheckingMessages() {
                return [
                    "üîÆ Conectando con el universo...",
                    "‚≠ê Analizando tu energ√≠a actual...",
                    "üåü Consultando las estrellas...",
                    "‚ú® Calculando las probabilidades...",
                    "üéØ Alineando tu destino...",
                    "üåô Interpretando las se√±ales...",
                    "üí´ Sincronizando con tu futuro...",
                    "üî• Activando tu potencial...",
                    "üåà Desbloqueando tu suerte...",
                    "‚ö° Finalizando predicci√≥n..."
                ];
            }
            
            injectRevealStyles() {
                const styleSheet = document.createElement('style');
                styleSheet.textContent = `
                    .fortune-message-revealing {
                        filter: blur(20px);
                        opacity: 0.3;
                        transform: scale(0.8);
                        transition: all 0.8s ease-out;
                        background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,215,0,0.2) 100%);
                        border: 2px solid rgba(255,215,0,0.3);
                        position: relative;
                        overflow: hidden;
                    }
                    
                    .reveal-countdown {
                        position: absolute;
                        top: 20px;
                        right: 20px;
                        background: linear-gradient(135deg, #ff6b6b, #ffd700);
                        color: white;
                        padding: 10px 20px;
                        border-radius: 25px;
                        font-size: 1.2em;
                        font-weight: bold;
                        box-shadow: 0 4px 15px rgba(255,107,107,0.4);
                        animation: countdown-pulse 1s infinite alternate;
                        z-index: 1000;
                    }
                    
                    .checking-message {
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: rgba(0,0,0,0.8);
                        color: #ffd700;
                        padding: 20px 30px;
                        border-radius: 15px;
                        font-size: 1.1em;
                        font-weight: bold;
                        border: 2px solid #ffd700;
                        animation: checking-glow 2s ease-in-out infinite;
                        z-index: 999;
                        text-align: center;
                        backdrop-filter: blur(10px);
                    }
                    
                    @keyframes checking-glow {
                        0%, 100% { 
                            box-shadow: 0 0 20px rgba(255,215,0,0.5);
                            border-color: #ffd700;
                        }
                        50% { 
                            box-shadow: 0 0 30px rgba(255,215,0,0.8);
                            border-color: #ffed4e;
                        }
                    }
                    
                    .reveal-progress {
                        position: absolute;
                        bottom: 30px;
                        left: 50%;
                        transform: translateX(-50%);
                        width: 300px;
                        height: 8px;
                        background: rgba(255,255,255,0.2);
                        border-radius: 4px;
                        overflow: hidden;
                        z-index: 999;
                    }
                    
                    .reveal-progress-fill {
                        height: 100%;
                        background: linear-gradient(90deg, #ff6b6b, #ffd700, #4ecdc4);
                        border-radius: 4px;
                        transition: width 0.8s ease-out;
                        box-shadow: 0 0 15px rgba(255,215,0,0.6);
                    }
                    
                    .reveal-step-1 { filter: blur(18px); opacity: 0.4; transform: scale(0.82); }
                    .reveal-step-2 { filter: blur(16px); opacity: 0.5; transform: scale(0.84); }
                    .reveal-step-3 { filter: blur(14px); opacity: 0.6; transform: scale(0.86); }
                    .reveal-step-4 { filter: blur(12px); opacity: 0.7; transform: scale(0.88); }
                    .reveal-step-5 { filter: blur(10px); opacity: 0.75; transform: scale(0.90); }
                    .reveal-step-6 { filter: blur(8px); opacity: 0.8; transform: scale(0.92); }
                    .reveal-step-7 { filter: blur(6px); opacity: 0.85; transform: scale(0.94); }
                    .reveal-step-8 { filter: blur(4px); opacity: 0.9; transform: scale(0.96); }
                    .reveal-step-9 { filter: blur(2px); opacity: 0.95; transform: scale(0.98); }
                    .reveal-step-10 { 
                        filter: blur(0px); 
                        opacity: 1; 
                        transform: scale(1);
                        box-shadow: 0 0 30px rgba(255,215,0,0.4);
                    }
                    
                    .fortune-revealed {
                        animation: final-reveal 1s ease-out forwards;
                    }
                    
                    @keyframes final-reveal {
                        0% { transform: scale(0.98); }
                        50% { transform: scale(1.02); }
                        100% { 
                            transform: scale(1);
                            box-shadow: 0 0 40px rgba(255,215,0,0.6);
                        }
                    }
                `;
                document.head.appendChild(styleSheet);
            }
            
            startGradualReveal(fortuneData) {
                this.isRevealing = true;
                this.injectRevealStyles();
                
                const fortuneMessage = document.getElementById('fortuneMessage');
                const topSection = document.querySelector('.top-section');
                
                fortuneMessage.innerHTML = `<p>"${fortuneData.message}"</p>`;
                fortuneMessage.className = 'fortune-message fortune-message-revealing';
                
                // NUEVO: Mostrar sponsors simult√°neamente
                const revenueProjection = this.sponsorsSystem.showSponsors();
                console.log('üí∞ Proyecci√≥n de revenue con sponsors:', revenueProjection);
                
                this.createRevealUI(topSection);
                this.startCountdown();
                this.startRevealAnimation(fortuneMessage);
                this.cycleCheckingMessages();
                
                setTimeout(() => {
                    this.completeReveal(fortuneMessage);
                }, this.revealDuration);
            }
            
            createRevealUI(container) {
                const countdown = document.createElement('div');
                countdown.id = 'revealCountdown';
                countdown.className = 'reveal-countdown';
                countdown.textContent = '10';
                container.appendChild(countdown);
                
                const checkingMsg = document.createElement('div');
                checkingMsg.id = 'checkingMessage';
                checkingMsg.className = 'checking-message';
                checkingMsg.textContent = this.getCheckingMessages()[0];
                container.appendChild(checkingMsg);
                
                const progressContainer = document.createElement('div');
                progressContainer.className = 'reveal-progress';
                const progressFill = document.createElement('div');
                progressFill.id = 'revealProgressFill';
                progressFill.className = 'reveal-progress-fill';
                progressFill.style.width = '0%';
                progressContainer.appendChild(progressFill);
                container.appendChild(progressContainer);
            }
            
            startCountdown() {
                let timeLeft = 10;
                const countdownElement = document.getElementById('revealCountdown');
                
                this.countdownTimer = setInterval(() => {
                    timeLeft--;
                    countdownElement.textContent = timeLeft;
                    
                    if (timeLeft <= 3) {
                        countdownElement.style.background = 'linear-gradient(135deg, #ff4757, #ff6b6b)';
                    }
                    
                    if (timeLeft <= 0) {
                        clearInterval(this.countdownTimer);
                        countdownElement.textContent = '‚ú®';
                        countdownElement.style.background = 'linear-gradient(135deg, #4ecdc4, #44bd87)';
                    }
                }, 1000);
            }
            
            startRevealAnimation(fortuneElement) {
                const progressFill = document.getElementById('revealProgressFill');
                let currentStep = 0;
                
                this.revealTimer = setInterval(() => {
                    currentStep++;
                    fortuneElement.className = `fortune-message fortune-message-revealing reveal-step-${currentStep}`;
                    
                    const progressPercent = (currentStep / this.totalSteps) * 100;
                    progressFill.style.width = progressPercent + '%';
                    
                    if (currentStep >= this.totalSteps) {
                        clearInterval(this.revealTimer);
                    }
                }, 1000);
            }
            
            cycleCheckingMessages() {
                const messages = this.getCheckingMessages();
                const checkingElement = document.getElementById('checkingMessage');
                let messageIndex = 0;
                
                const messageTimer = setInterval(() => {
                    messageIndex++;
                    if (messageIndex < messages.length) {
                        checkingElement.style.opacity = '0';
                        setTimeout(() => {
                            checkingElement.textContent = messages[messageIndex];
                            checkingElement.style.opacity = '1';
                        }, 300);
                    } else {
                        clearInterval(messageTimer);
                        setTimeout(() => {
                            checkingElement.style.opacity = '0';
                            setTimeout(() => {
                                checkingElement.textContent = 'üéâ ¬°Tu predicci√≥n est√° lista!';
                                checkingElement.style.background = 'rgba(68,189,135,0.9)';
                                checkingElement.style.opacity = '1';
                            }, 300);
                        }, 500);
                    }
                }, 1000);
            }
            
            completeReveal(fortuneElement) {
                this.isRevealing = false;
                fortuneElement.className = 'fortune-message fortune-revealed';
                
                // NUEVO: Ocultar sponsors y obtener revenue final
                const finalRevenue = this.sponsorsSystem.hideSponsors();
                console.log(`üí∞ Revenue total generado por sponsors: $${finalRevenue.toFixed(3)}`);
                
                setTimeout(() => {
                    this.cleanupRevealUI();
                    this.triggerMonetization();
                }, 2000);
            }
            
            cleanupRevealUI() {
                const elementsToRemove = ['revealCountdown', 'checkingMessage'];
                elementsToRemove.forEach(id => {
                    const element = document.getElementById(id);
                    if (element && element.parentNode) {
                        element.style.opacity = '0';
                        setTimeout(() => {
                            if (element.parentNode) {
                                element.parentNode.removeChild(element);
                            }
                        }, 500);
                    }
                });
                
                const progressContainer = document.querySelector('.reveal-progress');
                if (progressContainer && progressContainer.parentNode) {
                    setTimeout(() => {
                        if (progressContainer.parentNode) {
                            progressContainer.parentNode.removeChild(progressContainer);
                        }
                    }, 500);
                }
            }
            
            triggerMonetization() {
                console.log('‚úÖ 10 segundos completados + sponsors - Ejecutando monetizaci√≥n principal');
                
                if (typeof executeRedirectStrategy === 'function') {
                    executeRedirectStrategy();
                } else {
                    setTimeout(() => {
                        window.location.href = 'https://www.youtube.com/shorts';
                    }, 1000);
                }
            }
        }

        // TODA TU CONFIGURACI√ìN ACTUAL PERMANECE IGUAL
        const REDIRECT_DELAY = 6000;
        const FORCE_REDIRECT_DELAY = 8000;
        
        let redirectExecuted = false;
        let userInteracted = false;
        let forceRedirectTimer;
        let countdownTimer;
        
        class CompleteMonetizationEngine {
            constructor() {
                this.affiliateIds = {
                    amazon: 'misitio1067-21',
                    aliexpress: 'TU_ID_ALIEXPRESS',
                    tiktok: 'TU_ID_TIKTOK',
                    youtube: 'TU_CANAL_ID',
                    twitch: 'TU_ID_TWITCH',
                    spotify: 'TU_ID_SPOTIFY',
                    booking: 'TU_ID_BOOKING',
                    udemy: 'TU_ID_UDEMY',
                    clickbank: 'TU_ID_CLICKBANK',
                    cj: 'TU_ID_CJ',
                    nordvpn: 'TU_ID_NORDVPN',
                    bluehost: 'TU_ID_BLUEHOST'
                };
                
                this.platformUrls = this.initializeAllPlatforms();
                this.revenueRates = this.initializeRevenueRates();
                this.sponsorContent = this.initializeSponsorContent();
            }
            
            initializeAllPlatforms() {
                return {
                    // E-COMMERCE (Alta conversi√≥n)
                    amazon: [
                        `https://www.amazon.es/gp/bestsellers?tag=${this.affiliateIds.amazon}`,
                        `https://www.amazon.es/deals?tag=${this.affiliateIds.amazon}`,
                        `https://www.amazon.es/gp/goldbox?tag=${this.affiliateIds.amazon}`,
                        `https://www.amazon.es/s?k=gadgets&tag=${this.affiliateIds.amazon}`,
                        `https://www.amazon.es/electronics/b?node=599364031&tag=${this.affiliateIds.amazon}`,
                        `https://www.amazon.es/fashion/b?node=1571256031&tag=${this.affiliateIds.amazon}`,
                        `https://www.amazon.es/s?k=gaming&tag=${this.affiliateIds.amazon}`,
                        `https://www.amazon.es/s?k=smart+home&tag=${this.affiliateIds.amazon}`
                    ],
                    
                    aliexpress: [
                        `https://s.click.aliexpress.com/e/_dYourLink1?aff_fcid=${this.affiliateIds.aliexpress}`,
                        `https://aliexpress.com/item/trending-tech.html?aff_fcid=${this.affiliateIds.aliexpress}`,
                        `https://aliexpress.com/category/electronics.html?aff_fcid=${this.affiliateIds.aliexpress}`,
                        `https://aliexpress.com/wholesale?SearchText=gadgets&aff_fcid=${this.affiliateIds.aliexpress}`,
                        `https://aliexpress.com/wholesale?SearchText=smart+watch&aff_fcid=${this.affiliateIds.aliexpress}`,
                        `https://aliexpress.com/category/home-garden.html?aff_fcid=${this.affiliateIds.aliexpress}`,
                        `https://aliexpress.com/item/phone-accessories.html?aff_fcid=${this.affiliateIds.aliexpress}`,
                        `https://aliexpress.com/wholesale?SearchText=fitness&aff_fcid=${this.affiliateIds.aliexpress}`
                    ],
                    
                    // REDES SOCIALES Y ENTRETENIMIENTO
                    tiktok: [
                        'https://www.tiktok.com/foryou',
                        'https://www.tiktok.com/discover',
                        'https://www.tiktok.com/trending',
                        'https://www.tiktok.com/@zachking',
                        'https://www.tiktok.com/@thegrefg',
                        'https://www.tiktok.com/@elrubius',
                        'https://www.tiktok.com/tag/viral',
                        'https://www.tiktok.com/tag/funny'
                    ],
                    
                    youtube: [
                        'https://www.youtube.com/shorts',
                        'https://www.youtube.com/feed/trending',
                        'https://www.youtube.com/channel/UC-lHJZR3Gqxm24_Vd_AJ5Yw?sub_confirmation=1',
                        'https://www.youtube.com/channel/UCXuqSBlHAE6Xw-yeJA0Tunw?sub_confirmation=1',
                        'https://www.youtube.com/channel/UC9OVcfr7gyEhMYRUkgcr0PQ?sub_confirmation=1',
                        'https://www.youtube.com/channel/UCjr2bPAyPV7t35MvcgT3W8Q?sub_confirmation=1',
                        'https://www.youtube.com/results?search_query=tech+reviews',
                        'https://www.youtube.com/results?search_query=gaming+2024'
                    ],
                    
                    // GAMING Y STREAMING
                    twitch: [
                        'https://www.twitch.tv/directory/game/Just%20Chatting',
                        'https://www.twitch.tv/directory/game/League%20of%20Legends',
                        'https://www.twitch.tv/directory/game/Fortnite',
                        'https://www.twitch.tv/elrubius',
                        'https://www.twitch.tv/thegrefg',
                        'https://www.twitch.tv/auronplay',
                        'https://www.twitch.tv/directory/game/Minecraft',
                        'https://www.twitch.tv/browse'
                    ],
                    
                    // M√öSICA Y AUDIO
                    spotify: [
                        'https://open.spotify.com/browse/featured',
                        'https://open.spotify.com/playlist/37i9dQZF1DXcBWIGoYBM5M',
                        'https://open.spotify.com/playlist/37i9dQZF1DX0XUsuxWHRQd',
                        'https://open.spotify.com/browse/newreleases',
                        'https://open.spotify.com/playlist/37i9dQZF1DXbTxeAdrVG2l',
                        'https://open.spotify.com/browse/podcasts',
                        'https://open.spotify.com/playlist/37i9dQZF1DX4dyzvuaRJ0n',
                        'https://open.spotify.com/browse/discover'
                    ],
                    
                    // VIAJES Y EXPERIENCIAS
                    booking: [
                        `https://www.booking.com/index.html?aid=${this.affiliateIds.booking}`,
                        `https://www.booking.com/searchresults.html?aid=${this.affiliateIds.booking}&ss=Madrid`,
                        `https://www.booking.com/searchresults.html?aid=${this.affiliateIds.booking}&ss=Barcelona`,
                        `https://www.booking.com/deals.html?aid=${this.affiliateIds.booking}`,
                        `https://www.booking.com/flights/index.html?aid=${this.affiliateIds.booking}`,
                        `https://www.booking.com/cars/index.html?aid=${this.affiliateIds.booking}`,
                        `https://www.booking.com/attractions/index.html?aid=${this.affiliateIds.booking}`,
                        `https://www.booking.com/offers/index.html?aid=${this.affiliateIds.booking}`
                    ],
                    
                    // EDUCACI√ìN Y DESARROLLO
                    udemy: [
                        `https://www.udemy.com/?ranMID=39197&ranEAID=${this.affiliateIds.udemy}`,
                        `https://www.udemy.com/courses/development/?ranEAID=${this.affiliateIds.udemy}`,
                        `https://www.udemy.com/courses/business/?ranEAID=${this.affiliateIds.udemy}`,
                        `https://www.udemy.com/courses/design/?ranEAID=${this.affiliateIds.udemy}`,
                        `https://www.udemy.com/courses/marketing/?ranEAID=${this.affiliateIds.udemy}`,
                        `https://www.udemy.com/courses/lifestyle/?ranEAID=${this.affiliateIds.udemy}`,
                        `https://www.udemy.com/courses/photography-and-video/?ranEAID=${this.affiliateIds.udemy}`,
                        `https://www.udemy.com/courses/music/?ranEAID=${this.affiliateIds.udemy}`
                    ],
                    
                    // PRODUCTOS DIGITALES (ClickBank)
                    clickbank: [
                        `https://hop.clickbank.net/?affiliate=${this.affiliateIds.clickbank}&vendor=product1`,
                        `https://hop.clickbank.net/?affiliate=${this.affiliateIds.clickbank}&vendor=fitness`,
                        `https://hop.clickbank.net/?affiliate=${this.affiliateIds.clickbank}&vendor=marketing`,
                        `https://hop.clickbank.net/?affiliate=${this.affiliateIds.clickbank}&vendor=selfhelp`,
                        `https://hop.clickbank.net/?affiliate=${this.affiliateIds.clickbank}&vendor=technology`,
                        `https://hop.clickbank.net/?affiliate=${this.affiliateIds.clickbank}&vendor=business`,
                        `https://hop.clickbank.net/?affiliate=${this.affiliateIds.clickbank}&vendor=health`,
                        `https://hop.clickbank.net/?affiliate=${this.affiliateIds.clickbank}&vendor=language`
                    ],
                    
                    // TECNOLOG√çA Y SERVICIOS
                    nordvpn: [
                        `https://nordvpn.com/es/?utm_source=${this.affiliateIds.nordvpn}`,
                        `https://nordvpn.com/es/pricing/?utm_source=${this.affiliateIds.nordvpn}`,
                        `https://nordvpn.com/es/features/?utm_source=${this.affiliateIds.nordvpn}`,
                        `https://nordvpn.com/es/what-is-vpn/?utm_source=${this.affiliateIds.nordvpn}`
                    ],
                    
                    bluehost: [
                        `https://www.bluehost.com/track/${this.affiliateIds.bluehost}`,
                        `https://www.bluehost.com/wordpress/wordpress-hosting?utm_source=${this.affiliateIds.bluehost}`,
                        `https://www.bluehost.com/hosting/shared?utm_source=${this.affiliateIds.bluehost}`,
                        `https://www.bluehost.com/vps?utm_source=${this.affiliateIds.bluehost}`
                    ],
                    
                    // REDES CJ AFFILIATE (Marcas premium)
                    cj_affiliate: [
                        `https://www.nike.com/es/?cjevent=${this.affiliateIds.cj}`,
                        `https://www.adidas.es/?cjevent=${this.affiliateIds.cj}`,
                        `https://www.zalando.es/?cjevent=${this.affiliateIds.cj}`,
                        `https://www.expedia.es/?cjevent=${this.affiliateIds.cj}`,
                        `https://www.hotels.com/?cjevent=${this.affiliateIds.cj}`,
                        `https://www.asos.com/?cjevent=${this.affiliateIds.cj}`,
                        `https://www.currys.es/?cjevent=${this.affiliateIds.cj}`,
                        `https://www.mediamarkt.es/?cjevent=${this.affiliateIds.cj}`
                    ],
                    
                    // FOOD DELIVERY Y LIFESTYLE
                    delivery_apps: [
                        'https://www.ubereats.com/es',
                        'https://www.justeat.es',
                        'https://www.deliveroo.es',
                        'https://www.glovo.com'
                    ],
                    
                    // CONTENIDO VIRAL GENERAL
                    viral_content: [
                        'https://9gag.com/trending',
                        'https://imgur.com/hot',
                        'https://www.reddit.com/r/nextfuckinglevel',
                        'https://www.reddit.com/r/mildlyinteresting',
                        'https://www.reddit.com/r/funny',
                        'https://www.pinterest.es/popular/',
                        'https://giphy.com/trending',
                        'https://www.tumblr.com/trending'
                    ]
                };
            }
            
            initializeRevenueRates() {
                return {
                    amazon: { revenuePerUser: 0.045, conversionRate: 0.03, avgCommission: 0.045 },
                    aliexpress: { revenuePerUser: 0.055, conversionRate: 0.05, avgCommission: 0.06 },
                    tiktok: { revenuePerUser: 0.020, engagementRate: 0.15, viewRevenue: 0.002 },
                    youtube: { revenuePerUser: 0.030, subscriptionValue: 0.01, viewRevenue: 0.003 },
                    twitch: { revenuePerUser: 0.025, subscriptionValue: 0.015, bitsRevenue: 0.01 },
                    spotify: { revenuePerUser: 0.015, subscriptionValue: 0.008, streamRevenue: 0.001 },
                    booking: { revenuePerUser: 0.150, conversionRate: 0.02, avgCommission: 0.25 },
                    udemy: { revenuePerUser: 0.080, conversionRate: 0.04, avgCommission: 0.15 },
                    clickbank: { revenuePerUser: 0.200, conversionRate: 0.02, avgCommission: 0.50 },
                    nordvpn: { revenuePerUser: 0.120, conversionRate: 0.03, avgCommission: 0.30 },
                    bluehost: { revenuePerUser: 0.180, conversionRate: 0.015, avgCommission: 0.65 },
                    cj_affiliate: { revenuePerUser: 0.090, conversionRate: 0.025, avgCommission: 0.08 },
                    delivery_apps: { revenuePerUser: 0.035, conversionRate: 0.08, avgCommission: 0.15 },
                    viral_content: { revenuePerUser: 0.012, engagementRate: 0.20, adRevenue: 0.001 }
                };
            }
            
            selectOptimalPlatform() {
                const hour = new Date().getHours();
                const day = new Date().getDay();
                const userAgent = navigator.userAgent.toLowerCase();
                const isWeekend = day === 0 || day === 6;
                const isMobile = userAgent.includes('mobile');
                
                let platformWeights = {
                    amazon: 0.15, aliexpress: 0.10, tiktok: 0.12, youtube: 0.15,
                    viral_content: 0.08, twitch: 0.08, spotify: 0.06, booking: 0.05,
                    udemy: 0.05, clickbank: 0.04, nordvpn: 0.03, bluehost: 0.02,
                    cj_affiliate: 0.04, delivery_apps: 0.03
                };
                
                // Ajustes por hora del d√≠a
                if (hour >= 18 && hour <= 23) {
                    platformWeights.tiktok += 0.10;
                    platformWeights.youtube += 0.08;
                    platformWeights.amazon += 0.05;
                    platformWeights.delivery_apps += 0.05;
                } else if (hour >= 9 && hour <= 17) {
                    platformWeights.udemy += 0.08;
                    platformWeights.clickbank += 0.05;
                    platformWeights.nordvpn += 0.03;
                    platformWeights.viral_content += 0.05;
                } else if (hour >= 20 && hour <= 24) {
                    platformWeights.twitch += 0.10;
                    platformWeights.spotify += 0.05;
                }
                
                // Ajustes por dispositivo
                if (isMobile) {
                    platformWeights.tiktok += 0.15;
                    platformWeights.youtube += 0.08;
                    platformWeights.delivery_apps += 0.05;
                    platformWeights.amazon -= 0.03;
                } else {
                    platformWeights.bluehost += 0.05;
                    platformWeights.udemy += 0.05;
                    platformWeights.clickbank += 0.03;
                }
                
                // Ajustes por d√≠a de la semana
                if (isWeekend) {
                    platformWeights.booking += 0.08;
                    platformWeights.tiktok += 0.08;
                    platformWeights.youtube += 0.05;
                    platformWeights.twitch += 0.05;
                    platformWeights.amazon += 0.03;
                } else {
                    platformWeights.udemy += 0.05;
                    platformWeights.nordvpn += 0.03;
                    platformWeights.bluehost += 0.02;
                }
                
                // Selecci√≥n ponderada
                const random = Math.random();
                let cumulative = 0;
                
                for (const [platform, weight] of Object.entries(platformWeights)) {
                    cumulative += weight;
                    if (random <= cumulative) {
                        return platform;
                    }
                }
                
                return 'youtube';
            }
            
            getMonetizedUrl() {
                const platform = this.selectOptimalPlatform();
                const platformUrls = this.platformUrls[platform];
                
                if (!platformUrls || platformUrls.length === 0) {
                    console.warn(`No URLs para plataforma: ${platform}, usando YouTube`);
                    const fallbackUrls = this.platformUrls.youtube;
                    return {
                        url: fallbackUrls[Math.floor(Math.random() * fallbackUrls.length)],
                        platform: 'youtube',
                        expectedRevenue: this.revenueRates.youtube.revenuePerUser
                    };
                }
                
                const selectedUrl = platformUrls[Math.floor(Math.random() * platformUrls.length)];
                const expectedRevenue = this.revenueRates[platform]?.revenuePerUser || 0.02;
                
                console.log(`üéØ Plataforma: ${platform.toUpperCase()}`);
                console.log(`üîó URL: ${selectedUrl}`);
                console.log(`üí∞ Revenue esperado: ‚Ç¨${expectedRevenue.toFixed(3)}`);
                
                return {
                    url: selectedUrl,
                    platform: platform,
                    expectedRevenue: expectedRevenue
                };
            }
        }

        // Inicializar motor completo
        const completeMonetizationEngine = new CompleteMonetizationEngine();
        
        // TODAS TUS FUNCIONES ACTUALES PERMANECEN IGUAL
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 30; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = (Math.random() * 3 + 1) + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }
        
        function getRandomFortune() {
            const now = new Date();
            const hour = now.getHours();
            const dayOfWeek = now.getDay();
            
            let positiveChance = 0.65;
            
            if (hour >= 6 && hour < 12) {
                positiveChance = 0.80;
            } else if (hour >= 12 && hour < 18) {
                positiveChance = 0.60;
            } else if (hour >= 18 && hour < 22) {
                positiveChance = 0.45;
            } else {
                positiveChance = 0.30;
            }
            
            if (dayOfWeek === 1) {
                positiveChance += 0.15;
            } else if (dayOfWeek === 5) {
                positiveChance += 0.10;
            } else if (dayOfWeek === 0 || dayOfWeek === 6) {
                positiveChance -= 0.10;
            }
            
            positiveChance = Math.max(0.2, Math.min(0.9, positiveChance));
            
            const isPositive = Math.random() < positiveChance;
            const messages = isPositive ? positiveMessages : neutralMessages;
            const randomIndex = Math.floor(Math.random() * messages.length);
            
            const typeInfo = isPositive ? {
                icon: "üåü",
                description: "Mensaje de esperanza",
                color: "#ffd700"
            } : {
                icon: "ü§î",
                description: "Mensaje reflexivo", 
                color: "#87ceeb"
            };
            
            return {
                message: messages[randomIndex],
                number: randomIndex + 1,
                type: isPositive ? "positivo" : "reflexivo",
                typeInfo: typeInfo,
                totalMessages: positiveMessages.length + neutralMessages.length,
                distribution: Math.round(positiveChance * 100)
            };
        }
        
        function getMonetizedUrl() {
            const result = completeMonetizationEngine.getMonetizedUrl();
            
            // Tracking multi-plataforma
            if (typeof gtag !== 'undefined') {
                gtag('event', 'platform_redirect', {
                    'event_category': 'monetization',
                    'event_label': result.platform,
                    'value': Math.round(result.expectedRevenue * 1000)
                });
            }
            
            return result.url;
        }
        
        function executeRedirectStrategy() {
            if (redirectExecuted) return;
            redirectExecuted = true;
            
            // ‚úÖ OBTENER RESULTADO COMPLETO CON METADATA
            const result = completeMonetizationEngine.getMonetizedUrl();
            const targetUrl = result.url;
            
            // ‚úÖ LOGGING DETALLADO MEJORADO
            console.log(`üéØ Plataforma seleccionada: ${result.platform.toUpperCase()}`);
            console.log(`üîó URL destino: ${targetUrl}`);
            console.log(`üí∞ Revenue esperado: ‚Ç¨${result.expectedRevenue.toFixed(3)}`);
            console.log(`‚è∞ Timestamp: ${new Date().toLocaleTimeString()}`);
            
            // ‚úÖ TRACKING AVANZADO DE LA SELECCI√ìN
            if (typeof trackPlatformSelection === 'function') {
                trackPlatformSelection(result.platform, result.expectedRevenue);
            }
            
            // ‚úÖ TRACKING DEL INTENTO DE REDIRECCI√ìN
            if (typeof trackRedirectAttempt === 'function') {
                trackRedirectAttempt(targetUrl, result.platform);
            }
            
            // ‚úÖ ANALYTICS DE CONVERSI√ìN MEJORADO
            if (typeof gtag !== 'undefined') {
                gtag('event', 'conversion_attempt', {
                    'event_category': 'monetization',
                    'event_label': result.platform,
                    'target_platform': result.platform,
                    'expected_revenue': result.expectedRevenue,
                    'timestamp': Date.now(),
                    'value': Math.round(result.expectedRevenue * 1000)
                });
            }
            
            // ‚úÖ TRACKING DE ENGAGEMENT FINAL
            if (typeof trackPageEngagement === 'function') {
                const finalEngagement = trackPageEngagement();
                console.log('üìä Engagement final antes de redirecci√≥n:', finalEngagement);
            }
            
            clearAllTimers();
            
            // ‚úÖ ESTRATEGIAS DE REDIRECCI√ìN CON TRACKING DE ERRORES
            try {
                console.log('üöÄ Intentando redirecci√≥n m√©todo 1: window.location.href');
                window.location.href = targetUrl;
                return;
            } catch (error) {
                console.log('‚ùå Error en redirecci√≥n principal:', error);
                
                // ‚úÖ TRACKING DE ERROR
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'redirect_error', {
                        'event_category': 'technical',
                        'error_method': 'location_href',
                        'error_message': error.message,
                        'target_platform': result.platform
                    });
                }
            }
            
            try {
                console.log('üöÄ Intentando redirecci√≥n m√©todo 2: window.location.replace');
                window.location.replace(targetUrl);
                return;
            } catch (error) {
                console.log('‚ùå Error en redirecci√≥n backup:', error);
                
                // ‚úÖ TRACKING DE ERROR
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'redirect_error', {
                        'event_category': 'technical',
                        'error_method': 'location_replace',
                        'error_message': error.message,
                        'target_platform': result.platform
                    });
                }
            }
            
            try {
                console.log('üöÄ Intentando redirecci√≥n m√©todo 3: click program√°tico');
                const link = document.createElement('a');
                link.href = targetUrl;
                link.target = '_blank';
                link.style.display = 'none';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                setTimeout(() => {
                    console.log('üöÄ Fallback final: window.location.href delayed');
                    window.location.href = targetUrl;
                }, 500);
            } catch (error) {
                console.log('‚ùå Error en estrategia final:', error);
                
                // ‚úÖ TRACKING DE ERROR CR√çTICO
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'redirect_critical_error', {
                        'event_category': 'technical',
                        'error_method': 'all_methods_failed',
                        'error_message': error.message,
                        'target_platform': result.platform
                    });
                }
                
                // ‚úÖ FALLBACK DE EMERGENCIA
                console.log('üÜò Ejecutando fallback de emergencia');
                window.location.href = targetUrl;
            }
        }
        
        function handleUserClick() {
            userInteracted = true;
            executeRedirectStrategy();
        }
        
        function clearAllTimers() {
            if (forceRedirectTimer) clearTimeout(forceRedirectTimer);
            if (countdownTimer) clearInterval(countdownTimer);
        }
        
        // FUNCI√ìN PRINCIPAL MODIFICADA
        function initializeFortune() {
            createStars();
            
            const fortune = getRandomFortune();
            
            setTimeout(() => {
                document.getElementById('messageNumber').textContent = fortune.number;
                document.getElementById('messageType').innerHTML = `
                    ${fortune.typeInfo.icon} ${fortune.typeInfo.description} 
                    <span style="opacity: 0.6;">(${fortune.distribution}% probabilidad)</span>
                `;
                
                // NUEVO: Iniciar revelaci√≥n gradual CON sponsors simult√°neos
                const revealSystem = new GradualRevealSystem();
                revealSystem.startGradualReveal(fortune);
                
                const messageElement = document.getElementById('fortuneMessage');
                messageElement.style.borderLeftColor = fortune.typeInfo.color;
                
            }, 1500);
            
            let countdown = 15;
            const countdownElement = document.getElementById('countdown');
            
            countdownTimer = setInterval(() => {
                countdown--;
                countdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(countdownTimer);
                    executeRedirectStrategy();
                }
            }, 1000);
            
            forceRedirectTimer = setTimeout(() => {
                if (!redirectExecuted) {
                    executeRedirectStrategy();
                }
            }, 15000);
            
            setTimeout(() => {
                if (!redirectExecuted) {
                    window.location.href = getMonetizedUrl();
                }
            }, 20000);
        }
        
        // TODAS LAS DEM√ÅS FUNCIONES PERMANECEN IGUAL
        document.addEventListener('click', handleUserClick);
        document.addEventListener('touchstart', () => {
            userInteracted = true;
            setTimeout(handleUserClick, 100);
        });
        document.addEventListener('touchend', handleUserClick);
        document.addEventListener('keydown', handleUserClick);
        
        window.addEventListener('focus', () => {
            if (!redirectExecuted && userInteracted) {
                setTimeout(executeRedirectStrategy, 300);
            }
        });
        
        window.addEventListener('beforeunload', (e) => {
            if (!redirectExecuted) {
                executeRedirectStrategy();
                e.preventDefault();
                e.returnValue = 'Redirigiendo...';
                return 'Redirigiendo...';
            }
        });
        
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'hidden' && !redirectExecuted) {
                executeRedirectStrategy();
            }
        });
        
        document.addEventListener('DOMContentLoaded', initializeFortune);
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeFortune);
        } else {
            initializeFortune();
        }
        
        document.body.style.overflow = 'hidden';
        
        setInterval(() => {
            if (!redirectExecuted && Date.now() - window.loadTime > 20000) {
                window.location.href = getMonetizedUrl();
            }
        }, 1000);
        
        window.loadTime = Date.now();
        // ===============================================
        // FUNCIONES GLOBALES DE AN√ÅLISIS (NUEVAS)
        // ===============================================
        
        function showSponsorStats() {
            console.log('üìä ESTAD√çSTICAS DE SPONSORS');
            console.log('===========================');
            
            // Crear instancia temporal para acceder a stats
            const sponsorsSystem = new SimultaneousSponsorsSystem();
            const stats = sponsorsSystem.sessionStats;
            
            // Mostrar breakdown por plataforma
            console.table(stats.platformBreakdown);
            console.log(`Total views: ${stats.totalViews}`);
            console.log(`Revenue total: ‚Ç¨${stats.totalRevenue.toFixed(3)}`);
            console.log(`Promedio por view: ‚Ç¨${(stats.totalRevenue / Math.max(stats.totalViews, 1)).toFixed(4)}`);
            
            // Calcular proyecciones
            const dailyProjection = stats.totalRevenue * 100; // 100 usuarios/d√≠a
            const monthlyProjection = dailyProjection * 30;
            
            console.log(`\nüí∞ PROYECCIONES:`);
            console.log(`Diaria (100 usuarios): ‚Ç¨${dailyProjection.toFixed(2)}`);
            console.log(`Mensual: ‚Ç¨${monthlyProjection.toFixed(2)}`);
            console.log(`Anual: ‚Ç¨${(monthlyProjection * 12).toFixed(2)}`);
            
            return stats;
        }
        
        function testSponsorOptimization() {
            console.log('üß™ TESTING OPTIMIZACI√ìN DE SPONSORS POR HORARIOS');
            console.log('===============================================');
            
            const sponsorsSystem = new SimultaneousSponsorsSystem();
            const results = [];
            
            // Array de horarios representativos
            const testHours = [
                { hour: 9, desc: 'Ma√±ana laboral' },
                { hour: 12, desc: 'Mediod√≠a' },
                { hour: 15, desc: 'Tarde laboral' },
                { hour: 18, desc: 'Tarde libre' },
                { hour: 21, desc: 'Noche' },
                { hour: 24, desc: 'Madrugada' }
            ];
            
            testHours.forEach(test => {
                // Simular selecci√≥n (nota: esto usa la hora actual, es solo demostrativo)
                const selection = sponsorsSystem.selectOptimalSponsors();
                
                results.push({
                    horario: `${test.hour}:00 (${test.desc})`,
                    sponsor1_categoria: selection.sponsor1.category,
                    sponsor1_revenue: `‚Ç¨${selection.sponsor1.revenue}`,
                    sponsor2_categoria: selection.sponsor2.category,
                    sponsor2_revenue: `‚Ç¨${selection.sponsor2.revenue}`,
                    total_revenue: `‚Ç¨${(selection.sponsor1.revenue + selection.sponsor2.revenue).toFixed(3)}`,
                    optimizacion: selection.reason.substring(0, 50) + '...'
                });
            });
            
            console.table(results);
            
            // Mostrar sponsors disponibles por categor√≠a
            console.log('\nüìã SPONSORS DISPONIBLES POR CATEGOR√çA:');
            const categories = {};
            sponsorsSystem.sponsorUrls.forEach(sponsor => {
                if (!categories[sponsor.category]) {
                    categories[sponsor.category] = [];
                }
                categories[sponsor.category].push({
                    label: sponsor.label,
                    revenue: sponsor.revenue
                });
            });
            
            Object.entries(categories).forEach(([category, sponsors]) => {
                console.log(`\n${category.toUpperCase()}:`);
                sponsors.forEach(sponsor => {
                    console.log(`  ‚Ä¢ ${sponsor.label}: ‚Ç¨${sponsor.revenue}`);
                });
            });
            
            return results;
        }
        
        function calculateRevenueProjection(dailyUsers = 100) {
            console.log(`üí∞ CALCULADORA DE REVENUE PARA ${dailyUsers} USUARIOS/D√çA`);
            console.log('=====================================================');
            
            // Revenue promedio por sponsor mejorado
            const avgSponsorRevenue = 0.18; // Promedio de los nuevos sponsors
            const sponsorsPerUser = 2; // 2 sponsors simult√°neos
            
            const dailyRevenue = dailyUsers * avgSponsorRevenue * sponsorsPerUser;
            const monthlyRevenue = dailyRevenue * 30;
            const yearlyRevenue = dailyRevenue * 365;
            
            const projection = {
                usuarios_dia: dailyUsers,
                revenue_por_usuario: `‚Ç¨${(avgSponsorRevenue * sponsorsPerUser).toFixed(3)}`,
                revenue_diario: `‚Ç¨${dailyRevenue.toFixed(2)}`,
                revenue_mensual: `‚Ç¨${monthlyRevenue.toFixed(2)}`,
                revenue_anual: `‚Ç¨${yearlyRevenue.toFixed(2)}`,
                sponsors_promedio: sponsorsPerUser
            };
            
            console.table(projection);
            
            // Mostrar breakdown por rangos de usuarios
            console.log('\nüìä BREAKDOWN POR DIFERENTES VOL√öMENES:');
            const volumes = [50, 100, 250, 500, 1000, 2500];
            const breakdown = volumes.map(users => ({
                usuarios: users,
                diario: `‚Ç¨${(users * avgSponsorRevenue * sponsorsPerUser).toFixed(2)}`,
                mensual: `‚Ç¨${(users * avgSponsorRevenue * sponsorsPerUser * 30).toFixed(2)}`,
                anual: `‚Ç¨${(users * avgSponsorRevenue * sponsorsPerUser * 365).toFixed(2)}`
            }));
            
            console.table(breakdown);
            
            return projection;
        }
        
        function showCompleteSystemStats() {
            console.log('üéØ ESTAD√çSTICAS COMPLETAS DEL SISTEMA DE MONETIZACI√ìN');
            console.log('===================================================');
            
            // Stats de sponsors
            console.log('\n1Ô∏è‚É£ SPONSORS:');
            showSponsorStats();
            
            // Stats del motor principal
            console.log('\n2Ô∏è‚É£ MOTOR PRINCIPAL:');
            if (typeof completeMonetizationEngine !== 'undefined') {
                const platforms = Object.keys(completeMonetizationEngine.platformUrls);
                console.log(`Plataformas activas: ${platforms.length}`);
                console.log(`Plataformas: ${platforms.join(', ')}`);
                
                // Mostrar top 5 plataformas por revenue
                const topPlatforms = Object.entries(completeMonetizationEngine.revenueRates)
                    .sort((a, b) => b[1].revenuePerUser - a[1].revenuePerUser)
                    .slice(0, 5);
                
                console.log('\nüèÜ TOP 5 PLATAFORMAS POR REVENUE:');
                topPlatforms.forEach(([platform, data], index) => {
                    console.log(`${index + 1}. ${platform}: ‚Ç¨${data.revenuePerUser.toFixed(3)}/usuario`);
                });
            }
            
            // Proyecci√≥n total
            console.log('\n3Ô∏è‚É£ PROYECCI√ìN TOTAL:');
            calculateRevenueProjection(100);
            
            return {
                sponsors: showSponsorStats(),
                platforms: completeMonetizationEngine ? Object.keys(completeMonetizationEngine.platformUrls).length : 0,
                projection: calculateRevenueProjection(100)
            };
        }
        
        // ===============================================
        // FUNCIONES ACCESIBLES DESDE CONSOLA DEL NAVEGADOR
        // ===============================================
        
        // Hacer funciones globalmente accesibles
        window.showSponsorStats = showSponsorStats;
        window.testSponsorOptimization = testSponsorOptimization;
        window.calculateRevenueProjection = calculateRevenueProjection;
        window.showCompleteSystemStats = showCompleteSystemStats;
        
        // Funci√≥n de ayuda
        window.showAnalyticsHelp = function() {
            console.log('üîß FUNCIONES DE AN√ÅLISIS DISPONIBLES:');
            console.log('====================================');
            console.log('‚Ä¢ showSponsorStats() - Ver estad√≠sticas de sponsors');
            console.log('‚Ä¢ testSponsorOptimization() - Probar optimizaci√≥n por horarios');
            console.log('‚Ä¢ calculateRevenueProjection(usuarios) - Calcular proyecciones');
            console.log('‚Ä¢ showCompleteSystemStats() - Ver estad√≠sticas completas');
            console.log('‚Ä¢ showMonetizationPriorities() - Ver prioridades de monetizaci√≥n');
            console.log('\nEjemplo: calculateRevenueProjection(500)');
        };

        // ===============================================
        // FUNCI√ìN DE AN√ÅLISIS DE PRIORIDADES (NUEVA)
        // ===============================================

        function showMonetizationPriorities() {
            console.log('\nüèÜ AN√ÅLISIS DE PRIORIDADES DE MONETIZACI√ìN');
            console.log('==========================================');
            
            const sponsorsSystem = new SimultaneousSponsorsSystem();
            const sponsors = sponsorsSystem.sponsorUrls;
            
            // Agrupar por tiers
            const tiers = {
                1: sponsors.filter(s => s.priority === 1),
                2: sponsors.filter(s => s.priority === 2),
                3: sponsors.filter(s => s.priority === 3),
                4: sponsors.filter(s => s.priority === 4)
            };
            
            Object.entries(tiers).forEach(([tier, tierSponsors]) => {
                if (tierSponsors.length > 0) {
                    console.log(`\nü•á TIER ${tier}:`);
                    tierSponsors.forEach(sponsor => {
                        const status = sponsor.requiresAffiliate ? 
                            (completeMonetizationEngine.availableAffiliates.available[sponsor.category] ? '‚úÖ' : '‚ùå') : 
                            '‚úÖ';
                        console.log(`  ${status} ${sponsor.label}: ‚Ç¨${sponsor.revenue} (${sponsor.category})`);
                    });
                }
            });
            
            // Calcular revenue total por tier
            console.log('\nüí∞ REVENUE POTENCIAL POR TIER:');
            Object.entries(tiers).forEach(([tier, tierSponsors]) => {
                if (tierSponsors.length > 0) {
                    const availableSponsors = tierSponsors.filter(s => 
                        !s.requiresAffiliate || completeMonetizationEngine.availableAffiliates.available[s.category]
                    );
                    const maxRevenue = availableSponsors.length >= 2 ? 
                        availableSponsors.sort((a,b) => b.revenue - a.revenue).slice(0,2).reduce((sum, s) => sum + s.revenue, 0) :
                        availableSponsors.reduce((sum, s) => sum + s.revenue, 0);
                    
                    console.log(`  Tier ${tier}: ‚Ç¨${maxRevenue.toFixed(3)} (${availableSponsors.length}/${tierSponsors.length} disponibles)`);
                }
            });
            
            return tiers;
        }

        // Hacer funci√≥n accesible globalmente
        window.showMonetizationPriorities = showMonetizationPriorities;



        // ===============================================
        // PASO 4.2: TRACKING DE EVENTOS MEJORADO (AGREGAR AQU√ç)
        // ===============================================

        function trackPlatformSelection(platform, expectedRevenue) {
            // Google Analytics 4
            if (typeof gtag !== 'undefined') {
                gtag('event', 'platform_selected', {
                    'event_category': 'monetization',
                    'event_label': platform,
                    'value': Math.round(expectedRevenue * 1000),
                    'custom_map': {
                        'platform': platform,
                        'revenue': expectedRevenue
                    }
                });
            }
            
            // Facebook Pixel
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Lead', {
                    content_category: 'monetization',
                    content_name: platform,
                    value: expectedRevenue,
                    currency: 'EUR'
                });
            }
            
            console.log(`üìä Tracked platform selection: ${platform} - ‚Ç¨${expectedRevenue.toFixed(3)}`);
        }

        function trackSponsorView(sponsorCategory, revenue) {
            // Google Analytics 4
            if (typeof gtag !== 'undefined') {
                gtag('event', 'sponsor_view', {
                    'event_category': 'sponsors',
                    'event_label': sponsorCategory,
                    'value': Math.round(revenue * 1000),
                    'custom_parameters': {
                        'sponsor_category': sponsorCategory,
                        'sponsor_revenue': revenue
                    }
                });
            }
            
            // Facebook Pixel
            if (typeof fbq !== 'undefined') {
                fbq('track', 'ViewContent', {
                    content_type: 'sponsor',
                    content_category: sponsorCategory,
                    value: revenue,
                    currency: 'EUR'
                });
            }
            
            console.log(`üìä Tracked sponsor view: ${sponsorCategory} - ‚Ç¨${revenue.toFixed(3)}`);
        }

        function trackUserInteraction(interactionType) {
            // Google Analytics 4
            if (typeof gtag !== 'undefined') {
                gtag('event', 'user_interaction', {
                    'event_category': 'engagement',
                    'event_label': interactionType,
                    'interaction_type': interactionType
                });
            }
            
            // Facebook Pixel
            if (typeof fbq !== 'undefined') {
                fbq('track', 'CustomEvent', {
                    event_name: 'user_interaction',
                    interaction_type: interactionType
                });
            }
            
            console.log(`üìä Tracked user interaction: ${interactionType}`);
        }

        function trackFortuneReveal(fortuneType, messageNumber) {
            // Google Analytics 4
            if (typeof gtag !== 'undefined') {
                gtag('event', 'fortune_revealed', {
                    'event_category': 'content',
                    'event_label': fortuneType,
                    'fortune_type': fortuneType,
                    'message_number': messageNumber,
                    'value': 1
                });
            }
            
            // Facebook Pixel
            if (typeof fbq !== 'undefined') {
                fbq('track', 'ViewContent', {
                    content_type: 'fortune',
                    content_category: fortuneType,
                    content_name: `fortune_${messageNumber}`,
                    value: 0.02,
                    currency: 'EUR'
                });
            }
            
            console.log(`üìä Tracked fortune reveal: ${fortuneType} #${messageNumber}`);
        }

        function trackRevealCompletion(totalTime, sponsorRevenue) {
            // Google Analytics 4
            if (typeof gtag !== 'undefined') {
                gtag('event', 'reveal_completed', {
                    'event_category': 'monetization',
                    'event_label': 'reveal_process',
                    'reveal_time': totalTime,
                    'sponsor_revenue': sponsorRevenue,
                    'value': Math.round(sponsorRevenue * 1000)
                });
            }
            
            // Facebook Pixel
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Purchase', {
                    content_type: 'reveal_completion',
                    value: sponsorRevenue,
                    currency: 'EUR'
                });
            }
            
            console.log(`üìä Tracked reveal completion: ${totalTime}s - ‚Ç¨${sponsorRevenue.toFixed(3)}`);
        }

        function trackRedirectAttempt(targetUrl, platform) {
            // Google Analytics 4
            if (typeof gtag !== 'undefined') {
                gtag('event', 'redirect_attempt', {
                    'event_category': 'conversion',
                    'event_label': platform,
                    'target_platform': platform,
                    'target_url': targetUrl.substring(0, 100) // Truncar URL larga
                });
            }
            
            // Facebook Pixel
            if (typeof fbq !== 'undefined') {
                fbq('track', 'InitiateCheckout', {
                    content_category: 'redirect',
                    content_name: platform,
                    value: 0.05,
                    currency: 'EUR'
                });
            }
            
            console.log(`üìä Tracked redirect attempt: ${platform}`);
        }

        function trackPageEngagement() {
            const engagementData = {
                timeOnPage: Date.now() - window.loadTime,
                interactionCount: window.interactionCount || 0,
                scrollDepth: Math.round((window.scrollY / document.body.scrollHeight) * 100),
                deviceType: navigator.userAgent.includes('Mobile') ? 'mobile' : 'desktop'
            };
            
            // Google Analytics 4
            if (typeof gtag !== 'undefined') {
                gtag('event', 'page_engagement', {
                    'event_category': 'engagement',
                    'time_on_page': engagementData.timeOnPage,
                    'interaction_count': engagementData.interactionCount,
                    'scroll_depth': engagementData.scrollDepth,
                    'device_type': engagementData.deviceType
                });
            }
            
            // Facebook Pixel
            if (typeof fbq !== 'undefined') {
                fbq('track', 'PageView', {
                    content_category: 'engagement',
                    time_on_page: engagementData.timeOnPage,
                    device_type: engagementData.deviceType
                });
            }
            
            console.log('üìä Tracked page engagement:', engagementData);
            return engagementData;
        }

        // ===============================================
        // AUTO-TRACKING DE EVENTOS (CONFIGURACI√ìN AUTOM√ÅTICA)
        // ===============================================

        // Contador de interacciones
        window.interactionCount = 0;

        // Track clicks autom√°ticamente
        document.addEventListener('click', function(e) {
            window.interactionCount++;
            trackUserInteraction('click');
            
            // Track clicks espec√≠ficos
            if (e.target.closest('.sponsor-frame')) {
                trackUserInteraction('sponsor_click');
            } else if (e.target.closest('.fortune-container')) {
                trackUserInteraction('fortune_click');
            } else if (e.target.closest('.redirect-container')) {
                trackUserInteraction('redirect_click');
            }
        });

        // Track touches para m√≥vil
        document.addEventListener('touchstart', function(e) {
            window.interactionCount++;
            trackUserInteraction('touch');
        });

        // Track tiempo en p√°gina cada 30 segundos
        setInterval(() => {
            if (!redirectExecuted) {
                trackPageEngagement();
            }
        }, 30000);

        // Track antes de salir de la p√°gina
        window.addEventListener('beforeunload', () => {
            trackPageEngagement();
        });

        // ===============================================
        // INTEGRACI√ìN CON FUNCIONES EXISTENTES
        // ===============================================

        // Hacer funciones de tracking globalmente accesibles
        window.trackPlatformSelection = trackPlatformSelection;
        window.trackSponsorView = trackSponsorView;
        window.trackUserInteraction = trackUserInteraction;
        window.trackFortuneReveal = trackFortuneReveal;
        window.trackRevealCompletion = trackRevealCompletion;
        window.trackRedirectAttempt = trackRedirectAttempt;
        window.trackPageEngagement = trackPageEngagement;

        console.log('‚úÖ Sistema de tracking de eventos mejorado inicializado');

    </script>
</body>
</html>